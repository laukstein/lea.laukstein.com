ui.videos=function(){"use strict";function e(){if(ui.w.IntersectionObserver&&!e.error)try{!e.initDefined&&ui.w.IntersectionObserver&&ui.w.IntersectionObserverEntry&&"intersectionRatio"in ui.w.IntersectionObserverEntry.prototype&&!("isIntersecting"in IntersectionObserverEntry.prototype)&&Object.defineProperty(ui.w.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});var t=ui.d.querySelectorAll("img[data-src]");t=t.length?Array.from&&Array.from(t)||[].slice.call(t):[],e.initDefined=!0,t.forEach(function(t){e.observer.observe(t)})}catch(i){e.error=i}}function t(e){var t,i;try{e=JSON.parse(e)}catch(r){}try{t=e&&e.downloadTime&&new Date(Number(e.downloadTime))||n}catch(r){return 0}return t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),Math.abs(Math.floor((i-t)/864e5))}function i(e,t){var r,a,n,o="";for(n=0;!r&&n<e.length;n+=1)a=e[n].snippet,a&&(t?a.resourceId&&a.resourceId.videoId===t&&(o+=i.loop(a,"video"),r=!0):o+=i.loop(a,"image"));return o}var r=ui.d.getElementById("content"),a=ui.d.title,n=new Date,o=3,s=0,l=1,c={};return e.observer=ui.w.IntersectionObserver&&new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&t.target.dataset.src&&(t.target.src=t.target.dataset.src,t.target.removeAttribute("data-src"),e.observer.unobserve(t.target))})},{rootMargin:"200px 0px",threshold:.01}),i.safe=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},i.loop=function(e,t){return this[t||"image"]({id:e.resourceId&&encodeURIComponent(e.resourceId.videoId),image:e.thumbnails&&(e.thumbnails.maxres&&encodeURI(e.thumbnails.maxres.url)||e.thumbnails.standard&&encodeURI(e.thumbnails.standard.url)||e.thumbnails.high&&encodeURI(e.thumbnails.high.url)),title:this.safe(e.title),description:this.safe(e.description).replace(/\n/g,"<br>"),date:function(){try{return new Date(e.publishedAt).toLocaleDateString("he",{year:"numeric",month:"long",day:"numeric"})}catch(t){}}()})},i.links=function(e){var t={link:{regex:/(https?:\/\/[^\s:@.,]+\.+[a-z])[^<\s\\!,]{0,}[^<\s\\!|^.,?$]{1,}|[^\s:,/@\-0=]{1,}[a-z0-9\-.]\.com?\/*[^<\s\\!]{1,}[^<\s\\!|^.,$]/gi,pattern:'<a href="$&" rel=noopener target=_blank dir=auto>$&</a>'},email:{regex:/([\w.\-+_]+)?\w+@[\w-_]+(\.\w+){1,}/gm,pattern:'<a href="mailto:$&" rel=noopener target=_blank dir=ltr>$&</a>'},phone:{regex:/05\d{8}/gm,pattern:'<a href="tel:$&" rel=noopener target=_blank dir=ltr>$&</a>'}};return e&&e.replace(t.link.regex,t.link.pattern).replace(t.email.regex,t.email.pattern).replace(t.phone.regex,t.phone.pattern)},i.image=function(e){return e.image=ui.video.youtubeSupport?e.image:ui.video.getData(e.id).image,e.image?"<li class=box>    <figure class=play><img "+(ui.w.IntersectionObserver?"data-":"")+'src="'+e.image+'" alt="'+e.title+'"></figure>    <a class=absolute href="#'+e.id+'" aria-label="'+e.title+'" tabindex=0></a>    <h2 class=wrapline>'+e.title+"</h2>"+(e.description?"    <p>"+this.links(e.description)+"</p>":"")+(e.date?"    <div><time>"+e.date+"</time></div>":"")+"</li>":""},i.video=function(e){return ui.d.title=e.title,'<article class="box card" dir=ltr>    <div class=video>'+(ui.video.youtubeSupport?'<iframe src="https://www.youtube.com/embed/'+e.id+'?showinfo=0&autoplay=1" allow="autoplay; encrypted-media; fullscreen" allowfullscreen></iframe>':ui.video.template(e.id))+"    </div>    <div class=content dir=rtl>        <h1>"+e.title+"</h1>"+(e.description?"        <p>"+this.links(e.description)+"</p>":"")+(e.date?"        <div><time>"+e.date+"</time></div>":"")+"    </div></article>"},i.list=function(e){return"<div class=space>    <p>סרטונים ביוטיוב</p>    <div id=g-ytsubscribe class=g-ytsubscribe data-channelid=UCNNsgimJtU1q1LUMVsq44Dg data-layout=full data-count=hidden></div></div><ul class=list>"+e+"</ul>"},i.paintUI=function(t){var n,o=location.hash;o=o&&o.substring(1),t=ui.videos||t,t&&Array.isArray(t.items)&&(n=i(t.items,o),n?(o?t.scrollTop=ui.d.documentElement.scrollTop:ui.d.title=a,ui.isLoaded||(r.classList.remove("center"),r.classList.add("table","scale","space","medium","no-padding")),r.innerHTML=o?n:i.list(n),setTimeout(function(){o=location.hash&&location.hash.substring(1),ui.d.documentElement.scrollTop=o?0:t.scrollTop||0},10),ui.isLoaded||(ui.video.youtubeSupport&&ui.asyncScript("https://apis.google.com/js/platform.js",{remove:!0}),ui.isLoaded=!0),ui.comment&&(o?ui.comment.load(r):(ui.comment.remove(),ui.w.gapi&&gapi.ytsubscribe.go())),o?(e.observer&&e.observer.disconnect(),ui.video.applyPlyr()):e()):(o&&(location.hash=""),history.replaceState&&setTimeout(function(){history.replaceState({},ui.d.title,location.pathname)},0)))},c.call=function(e){delete localStorage.videos,fetch(e).then(function(e){return e.json()}).then(function(e){return c.getData(e,!0)})["catch"](function(){return/^https?:\/\/.*/.test(e)?c.call(ui.video.playlistLocalLink):c.error()})},c.success=function(e){return e=e||{},e.error?this.error(e):(e.downloadTime=+n,localStorage.videos=JSON.stringify(e),ui.videos=e,i.paintUI(e),ui.videos=e,ui.w.addEventListener("hashchange",i.paintUI),history.scrollRestoration&&(history.scrollRestoration="manual"),e)},c.error=function(e){return delete localStorage.videos,e=e||{},r=r&&r.querySelector("strong"),r&&(r.innerHTML="שגיאת שרת, <a href>נסה שוב</a> או מאוחר יותר."),ui.videos=e,e},c.getData=function(e,i){if(s+=1,s>o)return this.error();if(e&&t(e)<l){if(i)return this.success(e);try{return this.success(JSON.parse(e))}catch(r){return this.call(ui.video.playlistLink)}}return this.call(ui.video.playlistLink)},r?ui.legacy(function(){localStorage.videos?c.getData(localStorage.videos):c.error()}):console.error("Missing container element"),localStorage.videosDate&&delete localStorage.videosDate,ui.videos||{}}();