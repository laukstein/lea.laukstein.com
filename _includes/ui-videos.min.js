ui.videos=function(){"use strict";function e(){if(ui.w.IntersectionObserver&&!e.error)try{!e.initDefined&&ui.w.IntersectionObserver&&ui.w.IntersectionObserverEntry&&"intersectionRatio"in ui.w.IntersectionObserverEntry.prototype&&!("isIntersecting"in IntersectionObserverEntry.prototype)&&Object.defineProperty(ui.w.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});var t=ui.d.querySelectorAll("img[data-src]");t=t.length?Array.from&&Array.from(t)||[].slice.call(t):[],e.initDefined=!0,t.forEach(function(t){e.observer.observe(t)})}catch(i){e.error=i}}function t(){var e,t;try{e=localStorage.videosDate&&new Date(Number(localStorage.videosDate))||n}catch(i){return 0}return e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),Math.abs(Math.floor((t-e)/864e5))}function i(e,t){var r,o,s,a="";for(s=0;!r&&s<e.length;s+=1)o=e[s].snippet,o&&(t?o.resourceId&&o.resourceId.videoId===t&&(a+=i.loop(o,"video"),r=!0):a+=i.loop(o,"image"));return a}function r(t){var r,o=location.hash;o=o&&o.substring(1),t=ui.videos||t,t&&Array.isArray(t.items)&&(r=i(t.items,o),r?(o?t.scrollTop=ui.d.body.scrollTop:ui.d.title=a,ui.isLoaded||(s.classList.remove("center"),s.classList.add("table","scale","space","medium","no-padding")),s.innerHTML=o?r:i.list(r),ui.d.body.scrollTop=o?0:t.scrollTop||0,ui.isLoaded||(ui.video.youtubeSupport&&ui.asyncScript("https://apis.google.com/js/platform.js",{remove:!0}),ui.isLoaded=!0),ui.comment&&(o?ui.comment.load(s):(ui.comment.remove(),ui.w.gapi&&gapi.ytsubscribe.go())),o?(e.observer&&e.observer.disconnect(),ui.video.applyPlyr()):e()):(o&&(location.hash=""),history.replaceState&&setTimeout(function(){history.replaceState({},ui.d.title,location.pathname)},0)))}function o(){function e(t){fetch(t).then(function(e){return e.json()}).then(function(e){return o.getData(e,!0)})["catch"](function(i){return/^https?:\/\/.*/.test(t)?e("/assets/playlistItems.json"):o.error(i)})}var t=[];return ui.w.fetch||t.push("fetch"),t.length?ui.asyncScript("https://cdn.polyfill.io/v2/polyfill.min.js?features="+t.join(",")+"&flags=gated",{onSuccess:e}):e("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=UUNNsgimJtU1q1LUMVsq44Dg&maxResults=50&key=AIzaSyBt0-e3Ups6i4p8GQs811EarYbpMiPfxg4"),{inProgress:!0}}var s=ui.d.getElementById("content"),a=ui.d.title,n=new Date,c=3,l=0,u=1;return e.observer=ui.w.IntersectionObserver&&new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&(t.target.src=t.target.dataset.src,t.target.removeAttribute("data-src"),e.observer.unobserve(t.target))})},{rootMargin:"200px 0px",threshold:.01}),i.safe=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},i.loop=function(e,t){return this[t||"image"]({id:e.resourceId&&encodeURIComponent(e.resourceId.videoId),image:e.thumbnails&&(e.thumbnails.maxres&&encodeURI(e.thumbnails.maxres.url)||e.thumbnails.standard&&encodeURI(e.thumbnails.standard.url)||e.thumbnails.high&&encodeURI(e.thumbnails.high.url)),title:this.safe(e.title),description:this.safe(e.description).replace(/\n/g,"<br>"),date:function(){try{return new Date(e.publishedAt).toLocaleDateString("he",{year:"numeric",month:"long",day:"numeric"})}catch(t){}}()})},i.links=function(e){var t=/(https?:\/\/[^\s:@.,]+\.+[a-z])[^<\s\\!,]{0,}[^<\s\\!|^.,?$]{1,}|[^\s:,/@\-0=]{1,}[a-z0-9\-.]\.com?\/*[^<\s\\!]{1,}[^<\s\\!|^.,$]/gi,i='<a href="$&" rel=noopener target=_blank dir=auto>$&</a>';return e&&e.replace(t,i)},i.image=function(e){return e.image=ui.video.youtubeSupport?e.image:ui.video.getData(e.id).image,"<li class=box>    <figure class=play><img "+(ui.w.IntersectionObserver?"data-":"")+'src="'+e.image+'" alt="'+e.title+'"></figure>    <a class=absolute href="#'+e.id+'" tabindex=0></a>    <h2 class=wrapline>'+e.title+"</h2>"+(e.description?"    <p>"+this.links(e.description)+"</p>":"")+(e.date?"    <div><time>"+e.date+"</time></div>":"")+"</li>"},i.video=function(e){return ui.d.title=e.title,'<article class="box card" dir=ltr>    <div class=video>'+(ui.video.youtubeSupport?'<iframe src="https://www.youtube.com/embed/'+e.id+'?showinfo=0&hl=he&autoplay=1" gesture=media allowfullscreen></iframe>':ui.video.template(e.id))+"    </div>    <div class=content dir=rtl>        <h1>"+e.title+"</h1>"+(e.description?"        <p>"+this.links(e.description)+"</p>":"")+(e.date?"        <div><time>"+e.date+"</time></div>":"")+"    </div></article>"},i.list=function(e){return"<div class=space>    <h1>"+ui.d.title+"</h1>    <p>סרטונים ביוטיוב</p>    <div id=g-ytsubscribe class=g-ytsubscribe data-channelid=UCNNsgimJtU1q1LUMVsq44Dg data-layout=default data-count=hidden></div></div><ul class=list>"+e+"</ul>"},o.success=function(e){return e=e||{},e.error?this.error(e):(e.isLoaded=!0,localStorage.videos=JSON.stringify(e),localStorage.videosDate=localStorage.videosDate||+n,ui.videos&&(ui.videos=e),r(e),ui.videos&&(ui.videos=e),ui.w.onhashchange=r,e)},o.error=function(e){return delete localStorage.videos,delete localStorage.videosDate,e=e||{},s=s&&s.querySelector("strong"),s&&(s.innerHTML="שגיאת שרת, <a href>נסה שוב</a> או מאוחר יותר."),ui.videos&&(ui.videos=e),e},o.getData=function(e,i){if(l+=1,l>c)return o.error();if(e)if(t()<u){if(i)return o.success(e);try{return o.success(JSON.parse(e))}catch(r){return o()}}else delete localStorage.videos,delete localStorage.videosDate;return o()},s||console.error("Missing container element"),s&&o.getData(localStorage.videos)}();