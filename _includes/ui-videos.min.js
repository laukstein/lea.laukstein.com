ui.videos=function(){"use strict";function e(){if(ui.w.IntersectionObserver&&!e.error)try{!e.initDefined&&ui.w.IntersectionObserver&&ui.w.IntersectionObserverEntry&&"intersectionRatio"in ui.w.IntersectionObserverEntry.prototype&&!("isIntersecting"in IntersectionObserverEntry.prototype)&&Object.defineProperty(ui.w.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});var t=ui.d.querySelectorAll("img[data-src]");t=t.length?Array.from&&Array.from(t)||[].slice.call(t):[],e.initDefined=!0,t.forEach(function(t){e.observer.observe(t)})}catch(r){e.error=r}}function t(){var e,t;try{e=localStorage.videosDate&&new Date(Number(localStorage.videosDate))||a}catch(r){return 0}return e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),t=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),Math.abs(Math.floor((t-e)/864e5))}function r(e,t){var i,s,o,n="";for(o=0;!i&&o<e.length;o+=1)s=e[o].snippet,s&&(t?s.resourceId&&s.resourceId.videoId===t&&(n+=r.loop(s,"video"),i=!0):n+=r.loop(s,"image"));return n}function i(t){var i,s=location.hash;s=s&&s.substring(1),t=ui.videos||t,t&&Array.isArray(t.items)&&(i=r(t.items,s),i?(s?t.scrollTop=ui.d.body.scrollTop:ui.d.title=n,ui.isLoaded||(o.classList.remove("center"),o.classList.add("table","scale","space","medium","no-padding")),o.innerHTML=s?i:r.list(i),ui.d.body.scrollTop=s?0:t.scrollTop||0,ui.isLoaded||(ui.asyncScript("https://apis.google.com/js/platform.js",{remove:!0}),ui.isLoaded=!0),ui.comment&&(s?ui.comment.load(o):(ui.comment.remove(),ui.w.gapi&&gapi.ytsubscribe.go())),s?e.observer&&e.observer.disconnect():e()):(s&&(location.hash=""),history.replaceState&&setTimeout(function(){history.replaceState({},ui.d.title,location.pathname)},0)))}function s(){function e(){fetch("https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=UUNNsgimJtU1q1LUMVsq44Dg&maxResults=50&key=AIzaSyBt0-e3Ups6i4p8GQs811EarYbpMiPfxg4").then(function(e){return e.json()}).then(function(e){return s.getData(e,!0)})["catch"](function(e){return s.error(e)})}var t=[];return ui.w.fetch||t.push("fetch"),ui.w.IntersectionObserver||t.push("IntersectionObserver"),t.length?ui.asyncScript("https://cdn.polyfill.io/v2/polyfill.min.js?features="+t.join(",")+"&flags=gated",{onSuccess:e}):e(),{inProgress:!0}}var o=ui.d.getElementById("content"),n=ui.d.title,a=new Date,c=3,l=0,u=1;return e.observer=ui.w.IntersectionObserver&&new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&(t.target.src=t.target.dataset.src,t.target.removeAttribute("data-src"),e.observer.unobserve(t.target))})},{rootMargin:"200px 0px",threshold:.01}),r.safe=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},r.loop=function(e,t){return this[t||"image"]({id:e.resourceId&&encodeURIComponent(e.resourceId.videoId),image:e.thumbnails&&(e.thumbnails.maxres&&encodeURI(e.thumbnails.maxres.url)||e.thumbnails.standard&&encodeURI(e.thumbnails.standard.url)||e.thumbnails.high&&encodeURI(e.thumbnails.high.url)),title:this.safe(e.title),description:this.safe(e.description).replace(/\n/g,"<br>"),date:function(){try{return new Date(e.publishedAt).toLocaleDateString("he",{year:"numeric",month:"long",day:"numeric"})}catch(t){}}()})},r.links=function(e){var t=/(https?:\/\/[^\s:@.,]+\.+[a-z])[^<\s\\!,]{0,}[^<\s\\!|^.,?$]{1,}|[^\s:,/@\-0=]{1,}[a-z0-9\-.]\.com?\/*[^<\s\\!]{1,}[^<\s\\!|^.,$]/gi,r='<a href="$&" rel=noopener target=_blank dir=auto>$&</a>';return e&&e.replace(t,r)},r.image=function(e){return"<li class=box>    <figure class=play><img "+(ui.w.IntersectionObserver?"data-":"")+'src="'+e.image+'" alt="'+e.title+'"></figure>    <a class=absolute href="#'+e.id+'" tabindex=0></a>    <h2 class=wrapline>'+e.title+"</h2>"+(e.description?"    <p>"+this.links(e.description)+"</p>":"")+(e.date?"    <div><time>"+e.date+"</time></div>":"")+"</li>"},r.video=function(e){return ui.d.title=e.title,'<article class="box card" dir=ltr>    <div class=video><iframe src="https://www.youtube.com/embed/'+e.id+'?showinfo=0&autoplay=1" allowfullscreen></iframe></div>    <div class=content dir=rtl>        <h1>'+e.title+"</h1>"+(e.description?"        <p>"+this.links(e.description)+"</p>":"")+(e.date?"        <div><time>"+e.date+"</time></div>":"")+"    </div></article>"},r.list=function(e){return"<div class=space>    <h1>"+ui.d.title+"</h1>    <p>סרטונים ביוטיוב</p>    <div id=g-ytsubscribe class=g-ytsubscribe data-channelid=UCNNsgimJtU1q1LUMVsq44Dg data-layout=default data-count=hidden></div></div><ul class=list>"+e+"</ul>"},s.success=function(e){return e=e||{},e.error?this.error(e):(e.isLoaded=!0,localStorage.videos=JSON.stringify(e),localStorage.videosDate=localStorage.videosDate||+a,ui.videos&&(ui.videos=e),i(e),ui.videos&&(ui.videos=e),ui.w.onhashchange=i,e)},s.error=function(e){return delete localStorage.videos,delete localStorage.videosDate,e=e||{},o=o&&o.querySelector("strong"),o&&(o.innerHTML="שגיאת שרת, <a href>נסה שוב</a> או מאוחר יותר."),ui.videos&&(ui.videos=e),e},s.getData=function(e,r){if(l+=1,l>c)return s.error();if(e)if(t()<u){if(r)return s.success(e);try{return s.success(JSON.parse(e))}catch(i){return s()}}else delete localStorage.videos,delete localStorage.videosDate;return s()},o||console.error("Missing container element"),o&&s.getData(localStorage.videos)}();