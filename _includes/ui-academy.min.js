ui.academy={data:{interval:7,init:{title:"ברוכה הבאה לקורס סטייל שבא מבפנים",shortTitle:"ברוכה הבאה",video:"yCsI9dSOvK0"},session:{colours:{title:"הצבע הזה הוא אני",video:"6fuubXrOQ6c",pages:{"color-plates":{type:"video",title:"סרטון: לוחות צבעים",value:"_dohRGGGLmQ"},qa:{type:"qa",title:"שאלון:\nלאיזה קטגוריית צבעים את שייכת?",value:"academy-colours.jpg",option:[{title:"האם צבע השיער שלך שחור או חום כהה?",option:[{title:"העיניים שלך מבריקות, בולטות, בצבע ירוק כהה, ירוק זית? האם יש קונטראסט בין הלבן בעיניים לבין האישון?",final:"clear"},{title:"העיניים שלך בצבע חום כהה?",final:"deep"},{title:"העיניים שלך בהירות, בצבע כחול, ירוק בהיר או אפור בהיר?",final:"bright"}]},{title:"האם צבע השיער שלך בלונד בהיר, אפור בהיר, חום בהיר?",option:[{title:"העיניים שלך בהירות בצבעים כחול, אפור או ירוק בהיר?",final:"bright"},{title:"העיניים שלך בצבע חום בהיר, מתמזגות עם צבע השיער?",final:"mixed"}]},{title:"האם צבע השיער שלך חום בינוני או עכברי, אפור בינוני, בלונד אפורי, בלונד כהה?",option:[{title:"העיניים שלך בהירות בצבעים כחול בהיר, אפור או ירוק בהיר?",final:"bright"},{title:"העיניים שלך חום בהיר, מתמזג עם צבע השיער?",final:"mixed"}]},{title:"האם צבע השיער שלך ג'ינג'י, דבש, ערמוני, והעיניים שלך ירוק חם כהה, חום ירקרק, חום דבש, כחול ירוק?",final:"warm"},{title:"האם צבע השיער שלך חום אפרפר (עכברי), בלונדי-אפרורי, כסוף, שיבה אפור, והצבע העיניים שלך כחול או חום או ירקרק?",final:"cold"}],final:{clear:{title:"את צלולה",value:"1RBWFZEoSG2IBhZWX74-bFerykqF1sJns"},deep:{title:"את עמוקה",value:"1dB3YO4ph2X6G-5ljir0RLUUQn3l7tkTZ"},bright:{title:"את בהירה",value:"1F1juuLT-pHxU4FVlLEFXamQKesNd3AzO"},mixed:{title:"את מעורבת",value:"1bmSwDG6GGggZTUuNjDHxZNMSlwYa8SuW"},warm:{title:"את חמה",value:"1lml4F6bRh9yiz47x-t7Xs5sWjlo1mE9i"},cold:{title:"את קרה",value:"1OOitln7OtHB7qvUqvhvkHI7XnmLLwPUR"}}}}},"body-shape":{title:"כמה טוב להיות את!",video:"xZMfS-HXqXM",pages:{calculator:{type:"calculator",title:"מחשבון:\nתאבחני את מבנה הגוף שלך",value:"1gKI_JUyD20fvq27_B3Kxq9vfJ6f99xLnnd1ht1vibhU",button:"הצג תוצאה",notice:"שימי לב, חישוב ניתן רק לפעם אחת",result:"את בעלת מבנה גוף {0}",download:"להורדת מדריך הגיזרות",error:"שגיאה בחישוב, {0}נא לפנות ללאה{1}",option:{A:"היקף הכתפיים",B:"היקף היריכיים",C:"היקף המותן",D:"היקף החזה"},final:{hourglass:{title:"שעון חול",value:"1r5TBnSpeNRjTmwIaoKkiiqBBzNhESmdj"},invertedTriangle:{title:"משולש הפוך",value:"1_ekRaH2x8iP4jYovBSpVZuNUquO_WiJI"},triangle:{title:"משולש",value:"1ZFVcrckN8LhfZ8Gp9K7N1OUAn-BicVhD"},rounded:{title:"מעוגל",value:"1JWcPbgHI6uQRGVpr82zg5l79yDYYp39P"},square:{title:"מרובע",value:"1hRie1lANjULGnlUDrnUVPYjCxrD4n6Ws"}}}}},style:{title:"על טעם, ריח, ואופי",video:"06Q_GGX5KLQ",pages:{sat:{type:"sat",title:"שאלון:\nמצאי את סגנון הלבוש שלך",next:"המשך",back:"חזור",button:"הצג תוצאה",limit:"סמני מקסימום שתי תשובות",value:"academy-style.jpg",option:[{title:"כיצד את בוחרת את צבעי הבגדים שלך?",option:{A:"בהתאם למצב רוח שלי באותו יום",B:"צבעים חזקים וקונטרסטים",C:"צבעי פסטל",D:"פריטי לבוש המתאימים מבחינת הצבעים, הבדים או הדוגמאות",E:"בשילובי צבעים ניטרליים ופשוטים או בצבעי אדמה"}},{title:"כיצד תגדירי את סגנון הקניות שלך?",option:{A:"אוהבת לקנות בשווקים, יד שניה ובמבצעים",B:"קונה בלי לחשוב פעמיים כל דבר שמוצא חן בעיני",C:"הקניות עושות אותי שמחה ואני נהנת, אני יוצאת לקניות כשאני רוצה לשפר מצב רוח שלי",D:"הקניות שלי מתוכננות ונעשות על פי רשימה מוכנה מראש, משקיעה בפריטים איכותיים וקלאסיים שתמיד באופנה",E:"קונה בהתאם לצורך או לקראת אירועים מיוחדים. לא מוכנה לוותר על נוחות, במקרה הצורך אלך לתופרת"}},{title:"כיצד היית מגדירה את הופעתך באופן כללי?",option:{A:"בעלת סגנון ייחודי המשלב פריטים שונים ויוצאי דופן",B:"בעלת אמירה אופנתית ופריטים המושכים תשומת לב",C:"אוהבת בגדים עם קישוטים עדינים הגורמים לי להרגיש נשית",D:"נקי ואלגנטי",E:"אוהבת בגדים נוחים"}},{title:"איזה מהפריטים בארון שלך משמשים אותך לעבודה?",option:{A:"פריטי לבוש אקראיים שאני מערבבת ביניהם לפי טעמי האישי",B:"פריטים יוצאי דופן שתופסים את העין",C:"חולצות יפות ועליוניות שאני משלבת עם חצאיות",D:"פריטים בסיסיים הניתנים לשדרוג עם אביזרים, פריטים מחויטים",E:"פריטי לבוש יום יומיים, כמו מכנסי ג'ינס וחולצה פשוטים"}},{title:"איזה מהפריטים בארון שלך משמשים אותך לשעות הפנאי?",option:{A:"אוסף פריטי לבוש בסגנון רטרו או וינטאג'",B:"הפריטים האופנתיים שנרכשו לאחרונה",C:"פריטים יפים ונשיים, עם תחרות",D:"פריטים בעלי סגנון פשוט שלהם אני מוספיה אביזרים",E:"בגדים נוחים ואיכותיים, מכותנה או פשתן, טוניקות"}},{title:"איזה מהפריטים בארון שלך שמורים לאירועים מיוחדים?",option:{A:"שילבו בדים מיוחדים או גזרות מעניינות",B:"פריטים מיוחדים וגרנדיוזיים המושכים תשומת הלב",C:"שמלות נשיות וקלילות ומקושטות ועשויים מבדים קלילים",D:"חליפה אלגנטית ומחויטת או שמלה קלאסית וסולידית בשילוב תכשיטים אופנתיים",E:"חצאית אלגנטית ארוכה ונוחה או מכנסיים בשילוב עם חולצה נוחה וחגיגית או טוניקה"}},{title:"כיצד תתארי את הנעליים שלך?",option:{A:"לאו דווקא מתאימות ללבוש שלי אבל מיוחדות",B:"לרוב בעלות עקבים",C:"יפות עם סרטים או קישוטים",D:"קלאסיות, מתאימות להרבה בגדים",E:"נוחות ושטוחות"}},{title:"איזה סוג תכשיטים את אוהבת?",option:{A:"לא שגרתיים, ממש פריטי אספנות",B:"גדולים ובעלי אמירה אישית",C:"מורכבים ועשירים מאוד בפריטים, עם סלסולים ופרחים",D:"בעלי קו מעודן וקלאסי, עשויים מזהב או כסף",E:"עשויים בדרך כלל מחומרים טבעים"}},{title:"מהו יחסך לנושא האיפור?",option:{A:"אוהבת להתנסות בדברים חדשים ומתחדשים כל הזמן",B:"אוהבת אותו מודגש וקצת מוגזם",C:"אוהבת ומשקיעה בו זמן רב",D:"לא מחדשת, דבקה בהרגלים שלי, אבל חשוב ומשלים את ההופעה שלי",E:"מינימליסטי, אם בכלל"}},{title:"מהו סגנון כיסוי ראש / שיער שלך?",option:{A:"משתנה בהתאם למצב הרוח שלי",B:"משתנה בקביעות, משתנה בצבעוניות",C:"אוהבת להוציא שיער בצדדים. שיער ארוך",D:"מעודן ומשתלב עם הלבוש שלי",E:"דורש תחזוקה מינימלית"}},{title:"כשאת בוחרת חולצה מודפסת היא תהיה____?",option:{A:"הדפס בסגנון חדש, שאין לי בארון",B:"הדפס דומיננטי",C:"עדין עם נקודות או פרחים קטנים",D:"בדרך כלל קונה פריטים ללא הדפס",E:"אוהבת חלק וגם אוהבת הדפס אתני"}},{title:"באיזה סגנון את רואה את עצמך מתלבשת?",limit:"סמני תשובה אחת",showImage:!0,condition:function(e){"use strict";var t,i,s={C:["C","F"],E:["E","G"],CD:["C","D"]},a=ui.academy.data.session.style.pages.sat.final,n=this.id&&ui.d.getElementById(this.id);if(e=s[JSON.stringify(e).replace(/[[,\]"]/g,"")],this.option={},Array.isArray(e))for(i=0;i<e.length;i+=1)this.option[e[i]]=a[e[i]];return t=!!Object.keys(this.option).length,n&&t&&this.callback&&(n.innerHTML=this.callback.apply(null,this.params).replace(/^<li\b[^>]*>|<\/li>$/g,"")),t}}],success:{title:"הסגנון שלך הוא {0}",button:"להורדת חוברת הסגנון"},final:{A:{title:"יצירתי",value:"1dl0GD7_hE4HgAwybk9wSbn_bke47V0cZ"},B:{title:"דרמטי",value:"1c4WdteW3cNCkpHWzHKmCPRtJsZvT_hKI"},C:{title:"רומנטי",value:"1MHFG3yneMT4H0FJOAVi_pqNlpjMQG7F7"},D:{title:"קלאסי",value:"1nWiD5zvvmDDsuaL_cMGvkBsWow0FuYPl"},E:{title:"טבעי",value:"1d8t_zlmBV8A6x8zVmdgG-YnQVm4JgoQd"},F:{title:"בוהומייני",value:"1uoqQj_hfra3Vp7ovrdQwVBgI2ga21HRR"},G:{title:"קז'ואל",value:"1Zxt08RVGwgyvCFBxt6v-U7pnuEWNx-g-"}}}}},"magic-closet":{title:"ארון הקסמים",video:"GLQhGx2ULRo",download:{title:"להורדת חוברת ארון הקסמים",value:"1Ee5Zh92agzw6qkRsKE40t4zpwiw-DQTg"}},"modular-outfit":{title:"יש לך מה ללבוש",video:"_VYx-UC-VqU",download:{title:"להורדת חוברת מערכת פריטי הבסיס",value:"1kTlj1ZOXh8YQQyJCRuwBoShIfGKkUpLp"}},accessories:{title:"התוספת שתופסת",video:"fOYZbRKMYAE",pages:{"covers-shoes":{type:"video",title:"סרטון: מטפחות ונעליים",value:"JWTBhFri44w",download:{title:"להורדת חוברת האקססוריז",value:"1wPOeaV2Y1xKnOsoOR1VevgU-g0L95cGO"}},"match-headcover":{type:"video",title:"בונוס: התאמה למבני הפנים",value:"XW4S6zGtGic"}}},lingerie:{title:"יסודות למראה חטוב",video:"qk0-_Dnf3Z4",pages:{material:{type:"video",title:"סרטון: צבע, בד וגזרה בהלבשה תחתונה",value:"IpwM9HEeup4",download:{title:"להורדת חוברת הלבשה התחתונה",value:"1E8QTzqkLoWk23ht-BUCHt77QRoYCOuhc"}}}}}},hash:{},getIcon:function(e){"use strict";return"<svg class=icon-"+e+"><use xlink:href=#"+e+" /></svg>"},generateDownloadLink:function(e,t){"use strict";return'<a class=button href="https://drive.google.com/uc?export=download&id='+e+'" rel=noopener target=_blank tabindex=0>'+this.getIcon("download")+t+"</a>"},formatDate:function(e){"use strict";return("0"+e).slice(-2)},session:function(){"use strict";function e(e,t){var i={};try{i=JSON.parse(localStorage[e])}catch(t){delete localStorage[e]}return"function"==typeof t?t(i):i}return e("session",function(t){return t.email&&t.token?t:e("user",function(e){return e.email&&e.token&&(localStorage.session=localStorage.user,delete localStorage.user,ui.setUser(e)),e})})}(),endpoint:function(){"use strict";for(var e=location.hostname.split(".");e.length>2;)e.shift();return"https://lab."+e.join(".")+"/webhook"}(),dataset:function(e,t){"use strict";if(e&&1===e.nodeType)return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)},select:function(e,t){"use strict";if(e){var i={session:this.dataset(e,"session"),page:this.dataset(e,"page")};this.hash.session===i.session&&this.hash.page===i.page?e.classList.add("expand"):(i=ui.serialize(i),!t&&i?(location.hash=i,ui.d.body.scrollTop=0):(!i&&location.hash||!this.data.session[ui.hash("session")])&&(location.hash="",history.replaceState&&history.replaceState("",ui.d.title,location.pathname)))}},refresh:function(e){"use strict";e?ui.w.location=location.pathname:location.reload()},login:function(e){"use strict";e.preventDefault(),ui.form.accessibility(!1,null,!0);var t=this;fetch(t.endpoint+"/login",{method:"POST",redirect:"error",body:JSON.stringify({email:t.email.value.toLowerCase(),pass:t.pass.value})}).then(function(e){return e.json()}).then(function(e){t.updateSession(e),t.pushSW({status:"login"}),ui.setUser(e),ui.form.accessibility(!0,null,!0),e.email&&e.token?t.refresh():t.button&&(t.button.classList.add("error"),t.button.innerHTML="הפרטים שגויים, נסי שוב")}).catch(function(){ui.form.accessibility(!0,null,!0),t.button&&(t.button.classList.add("error"),t.button.innerHTML="טעות במערכת, נסי שוב מאוחר יותר")})},forgot:function(){"use strict";ui.form.el.setAttribute("onsubmit","ui.academy.remind(event)"),this.email.focus(),this.pass.parentNode.remove(),this.button.innerHTML="שלח לי סיסמא",this.button.classList.remove("error"),this.link.innerHTML="לנסות להתחבר מחדש",this.link.setAttribute("onclick","ui.academy.refresh(true)")},remind:function(e){"use strict";e.preventDefault(),ui.form.accessibility(!1,null,!0);var t=this;fetch(t.endpoint+"/forgot",{method:"POST",redirect:"error",body:JSON.stringify({email:t.email.value.toLowerCase()})}).then(function(e){return e.json()}).then(function(e){ui.form.accessibility(!0,null,!0),e.success?ui.form.el.innerHTML="<h2>פרטי גישה נשלחו למייל שלך</h2><a onclick=ui.academy.refresh(true)>לנסות להתחבר</a>":(t.button.classList.add("error"),t.button.innerHTML="מייל לא רשום, נסי שוב")}).catch(function(){ui.form.accessibility(!0,null,!0),t.button&&(t.button.classList.add("error"),t.button.innerHTML="טעות במערכת, נסי שוב מאוחר יותר")})},logout:function(e){"use strict";delete localStorage.session,e||this.pushSW({status:"logout"}),this.refresh(!0)},date:function(e){"use strict";e=e||{},this.currentTime?this.firstSession&&delete this.firstSession:this.firstSession=!0,this.currentTime=!e.interval&&this.currentTime||new Date(this.data.startDate);var t=new Date(this.currentTime.setDate(this.currentTime.getDate()+(e.interval?e.interval*this.data.interval:this.firstSession?0:this.data.interval))+(e.interval?0:1e7));return t.setHours(0,0,0,0),{enabled:+t<=+new Date,format:e.format||this.formatDate(t.getDate())+"/"+this.formatDate(t.getMonth()+1)}},key:function(e){"use strict";e&&e.target&&13===(e.keyCode||e.which)&&(e.preventDefault(),e.target.click())},events:function(e,t){"use strict";return" onclick=ui.academy.select(this) onkeydown=ui.academy.key(event)"+(e?" data-session="+e:"")+(t?" data-page="+t:"")+" tabindex="+(t?-1:0)},isLogged:function(){"use strict";this.data.startDate=+new Date(1e3*(this.session.startDate||this.session.created)).setHours(0,0,0,0),ui.d.documentElement.classList.remove("stretch"),ui.d.documentElement.classList.add("logedin"),this.details.remove(),this.account=ui.d.getElementById("account"),this.account.outerHTML='<div class=profile>    <img src="https://gravatar.com/avatar/'+this.session.avatar+'?s=42&r=g&d=mm">    <div class="table center">        <div class=cel>'+(this.session.firstName?"            <div class=nowrap dir=auto>"+this.session.firstName+"</div>":"")+"            <small onclick=ui.academy.logout()>התנתקי</small>        </div>    </div></div>",delete this.details,delete this.account;var e,t,i,s,a=this.data.init,n=ui.hash("session"),o="";o+='<div class="column nav-container" id=sidenav role=navigation dir=ltr><div class=sidenav dir=rtl>    <a class=active'+this.events()+"><label>"+(a.shortTitle||a.title)+"</label></a></div>",a=this.data.session,o+="<ol class=sidenav dir=rtl>";for(e in a)if(a.hasOwnProperty(e)&&(s=this.date(a[e].date),o+="    <li"+(e===n?" class=expand":"")+"><label"+(s.enabled?this.events(e):" disabled")+"><time>"+s.format+"</time><div>"+a[e].title+"</div></label>",(t=a[e].pages)&&s.enabled)){o+="<ol>";for(i in t)t.hasOwnProperty(i)&&(o+="    <li><a class=unselectable"+this.events(e,i)+">"+t[i].title.replace(/\n/g," ")+"</a>");o+="</ol>"}o+='</ol></div><div class="column content" id=content></div>',this.content.outerHTML="<div class=container>"+o+"</div>",this.content=ui.d.getElementById("content"),this.sidenav=ui.d.getElementById("sidenav"),this.toggleNav(!0)},uniqueID:function(){"use strict";return Math.random().toString(16).substr(2,8)},qa:function(e){"use strict";function t(e,s,a){var n,o,r,l=!1!==s,c="";if(s=s||0,l&&!a&&(s+=1),e){if(l&&(n=!e.option,r=!n&&i.uniqueID(),c+=(a?"":"<ol>")+"<li><input type=radio name="+s+(r?" id="+r:"")+"><label onclick="+(e.final?'"ui.academy.qa.dialog(event, '+s+", '"+e.final+"')\"":"ui.academy.qa.click(event) for="+r)+">"+i.getIcon("check")+e.title+"</label>"),Array.isArray(e.option)){s+=1,c+="<ol>";for(o in e.option)e.option.hasOwnProperty(o)&&(c+=t(e.option[o],s,!0));c+="</ol>"}else e.option&&(c+=t(e.option,s));l&&(c+="</li>"+(a?"":"</ol>"))}return c}var i=this;return this.qa.click=function(e){var t,i,s,a,n="LABEL"===e.target.tagName?e.target:e.target.closest("label"),o="true"===n.getAttribute("data-active");if(o){for(e.preventDefault(),i=n.parentNode.querySelectorAll("[data-active]"),s=0;s<i.length;s+=1)i[s].removeAttribute("data-active");for(i=n.parentNode.querySelectorAll("input:checked"),s=0;s<i.length;s+=1)i[s].checked=!1}else n.setAttribute("data-active","true");for(i=n.parentNode.parentNode.children,s=0;s<i.length;s+=1)if(o||i[s]!==n.parentNode)for(t=i[s].querySelectorAll("label"),a=0;a<t.length;a+=1)o?t[a].removeAttribute("disabled"):t[a].setAttribute("disabled","");else n.removeAttribute("disabled")},this.qa.dialog=function(t,s,a,n){var o=n||t.target,r=e.final[a],l="";return!n&&t&&this.click(t),o&&r&&(l+='<div class="dialog'+(n?" final":"")+'">   <div class=table>   <div class=cel>'+(n?"":"       <div class=close onclick=ui.academy.qa.reset(this) tabindex=0>"+i.getIcon("close")+"</div>")+"       <h1 class=nowrap>"+r.title+"</h1>"+(n?"":"       <p>שימי לב, אחרי הורדה לא ניתן לשנות קטגוריה</p>")+"       <div>"+(n?i.generateDownloadLink(r.value,"להורדת סרגל הצבעים"):"<a class=button onclick=\"ui.academy.qa.final(this, '"+a+"')\" tabindex=0>לקבל סרגל צבעים</a>")+"</div>   </div>   </div></div>",n||(o=1===s?o.parentNode:o.parentNode.parentNode.parentNode,o.insertAdjacentHTML("afterbegin",l))),l},this.qa.reset=function(e){e&&e.parentNode.parentNode.parentNode.remove();var t,i=ui.d.querySelectorAll(".qa [disabled]");for(t=0;t<i.length;t+=1)i[t].removeAttribute("disabled");for(i=ui.d.querySelectorAll(".qa input:checked"),t=0;t<i.length;t+=1)i[t].checked=!1;for(i=ui.d.querySelectorAll(".qa [data-active]"),t=0;t<i.length;t+=1)i[t].removeAttribute("data-active")},this.qa.final=function(e,t){var s={email:i.session.email,token:i.session.token,data:{qa:t}},a=ui.d.querySelector(".qa .close");a&&a.remove(),ui.form.accessibility(!1,ui.d.querySelector(".qa"),!0),fetch(i.endpoint+"/update",{method:"POST",redirect:"error",body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){return e.error?Promise.reject(e):e}).then(function(e){i.updateSession(e),i.refresh()}).catch(function(){e&&e.remove(),i.reportError("update",s)})},'<div class="form qa">    <h1>'+e.title.replace(/\n/g,"<br>")+"</h1>"+(this.session.task&&this.session.task.qa?this.qa.dialog(null,0,this.session.task.qa,!0):t(e,!1))+"</div>"},submit:function(e,t){"use strict";var i,s,a,n=e instanceof Event&&e,o=e&&e.target||e,r=this;if(n&&n.preventDefault(),ui.form.valid(ui.form.list("[data-required]",o))){switch(a=ui.hash("page"),s={email:r.session.email,token:r.session.token,data:{}},ui.form.accessibility(!1,o,!0,"sat"===a&&"label"),a){case"calculator":s.data[a]=function(){t=ui.form.deserialize(o);var e,i,s=t.A,n=t.B,l=t.C,c=t.D,u=function(e,t){return!1!==e&&Math.abs((e||0)-(t||0))<=8};return u(s,n)&&u(s,l)&&u(s,c)&&u(n,l)&&u(n,c)&&u(l,c)?"square":u(s,n)&&(s>l&&!u(s,l)||n>l&&!u(n,l))?"hourglass":s>n&&!u(s,n)||c>n&&!u(c,n)?"invertedTriangle":s<n&&!u(s,n)?"triangle":u(s,n)&&(s<l&&!u(s,l)||n<l&&!u(n,l))||l>c?"rounded":(ui.form.accessibility(!0,o,!0),e=o.querySelector("button"),i=o.querySelector("[data-status]"),i&&(i.innerHTML="<b>"+r.data.session["body-shape"].pages[a].error.format('<a href="/contact#diy" target=_blank>',"</a>")+"</b>",i.classList.add("error")),void(e&&e.classList.add("error")))}();break;case"sat":s.data[a]=t,o.closest("[data-handler]").querySelector("[data-back]").remove()}s.data[a]&&(i="update",fetch(r.endpoint+"/"+i,{method:"POST",redirect:"error",body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){return e.error?Promise.reject(e):e}).then(function(e){r.updateSession(e),r.refresh()}).catch(function(){r.reportError(i,s)}))}},calculator:function(e){"use strict";var t,i,s="";if(this.session.task&&this.session.task.calculator&&e.final[this.session.task.calculator])s='<div class="dialog final">   <div class=table>   <div class=cel>       <h1>'+e.result.format(e.final[this.session.task.calculator].title)+"</h1>       <div>"+this.generateDownloadLink(e.final[this.session.task.calculator].value,e.download)+"</div>   </div>   </div></div>";else{for(t=Object.keys(e.option),i=0;i<t.length;i+=1)s+='<li class=row>    <label class="column label" for='+t[i]+">"+e.option[t[i]]+"</label>    <div class=column><input id="+t[i]+" name="+t[i]+" type=number inputmode=numeric min=50 max=200 maxlength=3 data-required"+(i?"":" autofocus")+"></div></li>";s="<form onsubmit=ui.academy.submit(event) method=post novalidate>    <ul class=sheet>"+s+"</ul>    <div data-status><small><i>"+e.notice+"</i></small></div>    <button>"+e.button+"</button></form>"}return'<div class="form calculator">    <h1>'+e.title.replace(/\n/g,"<br>")+"</h1>"+s+"</div>"},sat:{ui:function(e){"use strict";var t,i,s,a,n,o,r,l=ui.academy,c="",u=0,d=[];return t=function(e){var t=[].concat.apply([],e),i=t.map(function(t){return"object"==typeof t&&t.final?{count:e.length+1,name:t.final}:{count:1,name:t}}).reduce(function(e,t){return e[t.name]=(e[t.name]||0)+t.count,e},{}),s=Object.keys(i),a=Math.max.apply(null,s.map(function(e){return i[e]})),n=s.reduce(function(e,t){return i[t]===a&&e.push(t),e},[]);if(n.length>2)return["A"];if(2===n.length)switch(JSON.stringify(n).replace(/[[,\]]/g,"")){case"AB":case"AC":case"AD":case"AE":return["A"];case"BC":case"BD":case"BE":return["B"];case"CE":return["F"];case"DE":return["G"]}return n},l.session.task&&l.session.task.sat&&l.session.task.sat.length?(t=t(l.session.task.sat),n=e.success.title.format(t.map(function(t){return e.final[t].title}).join(" ")),o=t.map(function(t){return l.generateDownloadLink(e.final[t].value,e.success.button)}).join(""),c='<div class="dialog final">   <div class=table>   <div class=cel>       <h1>'+n+"</h1>       <div>"+o+"</div>   </div>   </div></div>"):(i=function(e){var t,i,s=["Webkit","Moz","ms"],a=ui.d.documentElement.style;if(e){if((e=e.toLowerCase().replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}))in a)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=0;i<s.length;i+=1)if((t=s[i]+e)in a)return t}return null},this.navigate=function(e){if(e){var s=ui.d.getElementById("slide"),a=e.hasAttribute("data-next"),n=l.data.session.style.pages.sat.option;a?u<n.length-1&&(u+=1):(d[u]&&!Array.isArray(d[u])&&d.splice(u,1),u-=1),n=n[Math.abs(u)],n&&"function"!=typeof n.condition||n.condition(t(d))?s&&(s.style[i("transform")]="translateX("+100*u+"%)"):(u-=1,this.done(e))}},this.check=function(e){var t,i,s=e.closest("[data-handler]"),a=s.querySelector("[data-next]"),n=s.getAttribute("data-max"),o=ui.form.deserialize(s),r=Object.keys(o),l=r.length;n=n?Number(n)-1:1,t=function(e){for(i=0;i<e.length;i+=1)l>n?e[i].setAttribute("disabled",""):e[i].removeAttribute("disabled")},r.length?d[u]=0===n?{final:r[0]}:r:d[u]&&!Array.isArray(d[u])&&d.splice(u,1),l?a.removeAttribute("disabled"):a.setAttribute("disabled",""),t(ui.form.list("input:not(:checked)",s)),t(ui.form.list("input:not(:checked) ~ label",s))},this.done=function(e){l.submit(e.closest("[data-handler]"),d)},s=function(e,t,i){var s=l.uniqueID();return t="object"==typeof t?t.title:t,"<li"+(i?" class=box":"")+">    <input name="+e+" id="+s+" onclick=ui.academy.sat.check(this) type=checkbox>"+(i?"<figure><img class=absolute src=/assets/academy-style-"+e.toLowerCase()+'.jpg alt="'+t+'"></figure>':"")+'    <label class="column label wrap" for='+s+">"+ui.academy.getIcon("check")+t+"</label></li>"},a=function(t,i,n){var o,r=Object.keys(t.option||{}),c="",u="";for(o=0;o<r.length;o+=1)c+=s(r[o],t.option[r[o]],t.showImage);return t.hasOwnProperty("option")||(t.callback=a,t.params=arguments,t.id=l.uniqueID(),u=" id="+t.id+" data-max=1"),"<li class=qa"+u+" data-handler>    <h4 class=wrap>"+i+". "+t.title+"</h4>    <small class=wrap><i>"+(t.limit||e.limit)+"</i></small>    <ol"+(t.showImage?" class=grid":"")+">"+c+"</ol>"+(i===n?"    <button class=next onclick=ui.academy.sat.done(this) data-next disabled>"+e.button+"</button>":"    <button class=next onclick=ui.academy.sat.navigate(this) data-next disabled>"+e.next+"</button>")+(i>1?'    <span class="back unselectable" onclick=ui.academy.sat.navigate(this) data-back>'+e.back+"</span>":"")+"</li>"},r=function(e){var t,i=e.option,s="";for(t=0;t<i.length;t+=1)s+=a(i[t],t+1,i.length);return s},c='<form onsubmit=event.preventDefault() method=post novalidate>    <ul class="sheet wrapper" id=slide>'+r(e)+"</ul></form>"),'<div class="form sat">    <h1>'+e.title.replace(/\n/g,"<br>")+"</h1>"+c+"</div>"}},videoTemplate:function(e){"use strict";var t,i=e.value||e.video,s="";if(e.pages)for(t in e.pages)e.pages.hasOwnProperty(t)&&(s+='<a class=button href="#session='+ui.hash("session")+"&page="+t+'" tabindex=0>'+e.pages[t].title+"</a> ");return e.download&&(s+=this.generateDownloadLink(e.download.value,e.download.title)),"<div class=video>"+(ui.video.youtubeSupport?'<iframe src="https://www.youtube.com/embed/'+i+'"  allow="autoplay; encrypted-media; fullscreen" allowfullscreen></iframe>':ui.video.template(i))+"</div><div class=space><h1>"+e.title+"</h1>"+s+"</div>"},pageSession:function(){"use strict";var e,t=ui.hash(),i="";if(this.valid&&this.content)if(this.self=t.session?this.data.session[t.session]:-1===location.href.indexOf("#")||!location.hash&&!history.replaceState?this.data.init:null,!this.self||t.session&&this.sidenav&&!this.sidenav.querySelector('[data-session="'+t.session+'"]:not([data-page])'))delete this.self,this.refresh(!0);else if(e=this.self,this.bar&&this.bar.checked&&(this.bar.checked=!1),e){if(!t.session||t.session&&!t.page)e.video&&(i+=this.videoTemplate(e)),"function"==typeof e.generateHTML&&(i+=e.generateHTML());else if((e=t.session?e&&e.pages&&e.pages[t.page]:e)&&e.type){switch(e.type){case"video":i+=this.videoTemplate(e);break;case"calculator":case"sat":case"qa":i+=this[e.type].ui?this[e.type].ui(e):this[e.type](e)}this.self=e}this.content.innerHTML=i,e?((e.video||"video"===e.type)&&ui.video.applyPlyr(),ui.comment&&ui.comment.load(this.content)):ui.comment&&ui.comment.remove()}},toggleNavClassName:function(e){"use strict";var t,i,s=ui.hash(),a={session:this.sidenav&&this.sidenav.querySelector(".expand"),active:this.sidenav&&this.sidenav.querySelector(".active"),page:this.sidenav&&this.sidenav.querySelector(".selected")};s.previous={session:this.dataset(a.session,"session"),page:this.dataset(a.page||a.active,"page")},t=function(t,n,o){(o||s.previous[t]!==s[t])&&(a[t]&&(a[t].classList.remove(n),a[t].nextElementSibling&&"OL"===a[t].nextElementSibling.tagName&&ui.form.list("a",a[t].nextElementSibling).forEach(function(e){e.tabIndex=-1}),ui.d.activeElement===a[t]&&a[t].blur()),i||(i=!0),e&&(e.classList.add(n),e.nextElementSibling&&"OL"===e.nextElementSibling.tagName&&ui.form.list("a",e.nextElementSibling).forEach(function(e){e.tabIndex=0})))},t("session","expand"),t("page","selected",!!i),t("active","active",!!i)},toggleNav:function(e){"use strict";var t,i,s=ui.academy;s.hash=ui.hash(),s.sidenav&&(t=location.hash?s.data.session[s.hash.session]:s.data.init,t&&(s.toggleNavClassName(s.sidenav.querySelector(location.hash?'[data-session="'+s.hash.session+'"]:not([data-page])':"a")),t.pages&&t.pages[s.hash.page]&&s.toggleNavClassName(s.sidenav.querySelector('[data-session="'+s.hash.session+'"][data-page="'+s.hash.page+'"]'))),!0!==e||location.hash||(i=s.sidenav.querySelectorAll("[data-session]:not([data-page])"),s.toggleNavClassName(i[i.length-1]))),s.pageSession()},sessionError:function(){"use strict";if(sessionStorage.sessionError){var e=ui.d.getElementById("session-error");e&&(e.hidden=!1,e.innerHTML=sessionStorage.sessionError,delete sessionStorage.sessionError)}},reportError:function(e,t){"use strict";"prod"===ui.environment?"sendBeacon"in navigator&&navigator.sendBeacon(this.endpoint+"/error",JSON.stringify({schema:e,email:this.session.email,log:JSON.stringify(t,null,2)})):console.error(e,t),sessionStorage.sessionError="זהינו שלא פעלת בחשבונך בדקות האחורנות. אנה התחברי שוב.",delete localStorage.session,this.refresh()},updateSession:function(e,t){"use strict";"object"==typeof e&&(e.dataTime=e.dataTime||+new Date,t||this.pushSW({status:"update",data:e}),this.session=e,localStorage.session=JSON.stringify(e))},vertifySession:function(e,t){"use strict";if(!t&&this.session.startDate&&+new Date-Number(this.session.dataTime)<864e5)"function"==typeof e&&e();else{var i=this,s={email:i.session.email,token:i.session.token};fetch(i.endpoint+"/vertify",{method:"POST",redirect:"error",body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){return e.error?Promise.reject(e):e}).then(function(t){i.updateSession(t),"function"==typeof e&&e()}).catch(function(){i.reportError("vertify",s)})}},pushSW:function(e,t){"use strict";if("object"==typeof e&&navigator.serviceWorker&&navigator.serviceWorker.controller)if("dev"===ui.environment&&console.log("ServiceWorker",e),t)switch(e.status){case"login":return location.reload();case"logout":return this.logout(!0);case"update":return this.updateSession(e.data,!0)}else navigator.serviceWorker.controller.postMessage(e)},registerSW:function(){"use strict";"https:"===location.protocol&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(){navigator.serviceWorker.addEventListener("message",function(e){e.data&&ui.academy.pushSW(e.data,!0)})})},init:function(){"use strict";var e=this;ui.legacy(function(){var t=ui.d.getElementById("loading");ui.form.el=ui.d.getElementById("form"),e.bar=ui.d.getElementById("bar"),e.button=ui.d.getElementById("button"),e.content=ui.d.getElementById("content"),e.details=ui.d.getElementById("details"),e.email=ui.d.getElementById("email"),e.link=ui.d.getElementById("link"),e.pass=ui.d.getElementById("pass"),e.valid=!!e.session.email&&!!e.session.token,e.content.removeAttribute("hidden"),e.details.removeAttribute("hidden"),e.registerSW(),t&&t.remove(),e.valid?e.vertifySession(function(){e.isLogged(),ui.identify.all()}):e.session.email&&(e.email.value=e.session.email,setTimeout(function(){e.pass.focus()},0)),ui.w.addEventListener("hashchange",e.toggleNav),e.sessionError()})}},ui.academy.init();