ui.academy={data:{interval:7,init:{title:"ברוכות הבאות",page:{type:"video",title:'ברוכות הבאות לקורס "הנוסחא לסטיילינג ב5 דקות לאישה הדתית"',value:"7iRtL9RTX7w"}},session:{colours:{title:"צבעים ושילובים",pages:{"video-1":{type:"video",title:"איך צבע נכון ולא נכון משפיע על הפנים",value:"Ws126uyiS9g"},"video-2":{type:"video",title:"שש קטגורייות אנשים",value:"fyLTeiOpItU"},"video-3":{type:"video",title:"שיעורי בית",value:"1LcyCHR5D-Q"},qa:{type:"qa",title:"שאלון: לאיזה קטגוריית צבעים את שייכת?",value:"academy-colours.jpg",question:[{title:"האם צבע השיער שלך שחור או חום כהה?",question:[{title:"העיניים שלך מבריקות, בולטות, בצבע כחול כהה או ירוק כהה? האם יש קונטראסט בין הלבן בעיניים לבין האישון?","final":"clear"},{title:"העיניים שלך כהות?","final":"deep"},{title:"העיניים שלך בהירות, כחול בהיר או אפור בהיר?","final":"bright"}]},{title:"האם צבע השיער שלך בלונד בהיר, אפור בהיר, חום בהיר?",question:[{title:"העיניים שלך בהירות בצבעים כחול בהיר, אפור או ירוק בהיר?","final":"bright"},{title:"העיניים שלך חום בהיר, מתמזג עם צבע השיער?","final":"mixed"}]},{title:"האם צבע השיער שלך חום בינוני או עכברי, אפור בינוני, בלונד אפורי, בלונד כהה?",question:[{title:"העיניים שלך בהירות בצבעים כחול בהיר, אפור או ירוק בהיר?","final":"bright"},{title:"העיניים שלך חום בהיר, מתמזג עם צבע השיער?","final":"mixed"}]},{title:"האם צבע השיער שלך ג'ינג'י, דבש, ערמוני, והעיניים שלך ירוק חם כהה, חום ירקרק, חום דבש, כחול ירוק?","final":"warm"},{title:"האם צבע השיער שלך חום אפרפר (עכברי), בלונדי-אפרורי, כסוף, שיבה אפור, והצבע העיניים שלך כחול או חום או ירקרק?","final":"cold"}],"final":{clear:{title:"את צלולה",value:"0B3TGizvMXI6lZGZTckc0VElhVnc"},deep:{title:"את עמוקה",value:"0B3TGizvMXI6lSXNCYTNpLUh3LUU"},bright:{title:"את בהירה",value:"0B3TGizvMXI6lbUJ0S1RCbkpiU28"},mixed:{title:"את מעורבת",value:"0B3TGizvMXI6lbWhDNW1SNHZWVU0"},warm:{title:"את חמה",value:"0B3TGizvMXI6lNHhrTzdzb3ByaU0"},cold:{title:"את קרה",value:"0B3TGizvMXI6lNzRjamg5a1ZreVE"}}},"video-4":{type:"video",title:"איך לשלב צבעים",value:"3cA_tnKHbvo"},document:{type:"document",title:"מעגל צבעים",value:"0B3TGizvMXI6lSnktdTdteUtJS0k"}}},"body-shape":{title:"מבנה גוף",pages:{"video-1":{type:"video",title:"למה חשוב להתלבש לפי מבנה גוף",value:"67JOe6ZRV7c"},"video-2":{type:"video",title:"אילו מבנה גוף יש",value:"QrPC6lvIAKE"},"video-3":{type:"video",title:"איך לדעת מה מבנה גוף שלך",value:"GRyHlrJnV6Q"},table:{type:"video",title:"שאלון: תאבחני את מבנה הגוף שלך",value:"איך למלא שאלון"}}},style:{title:"סגנון הלבוש",pages:{"video-1":{type:"video",title:"למה חשוב לדעת מה סגנון הלבוש שלך",value:"7AMQxfNDzIM"},"video-2":{type:"video",title:"אילו סגנונות לבוש יש",value:""},"video-3":{type:"video",title:"שיעורי בית",value:"rs8o-d7gkpo"},table:{title:"שאלון: תאבחני את סגנון הלבוש שלך"}}},lingerie:{title:"הלבשה תחתונה",pages:{"video-1":{type:"video",title:"כמה חשיבות יש הלבשה תחתונה",value:"k1ASomUAM34"},"video-2":{type:"video",title:"גזרה, צבע ובד בהלבשה תחתונה",value:""},"video-3":{type:"video",title:"איך לדעת שהלבשה תחתונה מתאימה",value:"2H9HC-eaRAE"},"video-4":{type:"video",title:"שיעורי בית",value:"nYtkrABvBXw"}}},accessories:{title:"אקססוריז",pages:{"video-1":{type:"video",title:"למה להשתמש באקססוריז",value:"lJN1n7ecLmY"},"video-2":{type:"video",title:"סוגי אקססוריז",value:""},"video-3":{type:"video",title:"איך להתאים אקססוריז למבנה גוף שלך",value:"dkO7I7yHu0o"},"video-4":{type:"video",title:"שיעורי בית",value:"uxNjzX1V6uk"}}},"modular-outfit":{title:"מערכת לבוש היעלה ביותר לאישה הדתית",pages:{"video-1":{type:"video",title:"למה חשוב שמערכת לבוש תהיה יעילה",value:"8rn-HCDQzL4"},"video-2":{type:"video",title:"מה כוללת מערכת לבוש יעילה",value:""},"video-3":{type:"video",title:"כמה שילובים חדשים אפשר להוציא מ9 פריטים",value:""},"video-4":{type:"video",title:"שיעורי בית",value:"yzJaU1ZW1QU"},"check-list":{title:"צ’ק ליסט למערכת לבוש יעילה"}}},bonuses:{title:"בונוסים",date:{enabled:!1,format:"..."},pages:{pregnency:{},face:{}}}}},user:function(){"use strict";try{return JSON.parse(localStorage.user)}catch(e){return delete localStorage.user,{}}}(),fetch:"https://lab.laukstein.com/academy",dataset:function(e,t){"use strict";return e&&1===e.nodeType?e.dataset?e.dataset[t]:e.getAttribute("data-"+t):void 0},serialize:function(e){"use strict";if(e){var t,i=Object.keys(e),a=[];for(t=0;t<i.length;t+=1)e[i[t]]&&a.push(i[t]+"="+encodeURIComponent(e[i[t]]));return a.join("&")}return""},select:function(e,t){"use strict";if(e){var i=this.serialize({session:this.dataset(e,"session"),page:this.dataset(e,"page")});!t&&i?(location.hash=i,ui.d.body.scrollTop=0):(!i&&location.hash||!this.data.session[ui.hash("session")])&&(location.hash="",history.pushState&&history.pushState("",ui.d.title,location.pathname))}},refresh:function(e){"use strict";e?location=location.pathname:location.reload()},login:function(e){"use strict";e.preventDefault(),ui.form.accessibility(!1),this.button.classList.add("spin"),fetch(this.fetch+"/login",{method:"POST",redirect:"error",body:JSON.stringify({email:this.email.value,pass:this.pass.value})}).then(function(e){return e.json()}).then(function(e){localStorage.user=JSON.stringify(e);var t=ui.academy;ui.form.accessibility(!0),t.button.classList.remove("spin"),e.email&&e.token?ui.academy.refresh():t.button&&(t.button.classList.add("error"),t.button.innerHTML="הפרטים שגויים, נסי שוב")})["catch"](function(){alert("טעות במערכת, נסי שוב מאוחר יותר")})},forgot:function(){"use strict";ui.form.el.setAttribute("onsubmit","ui.academy.remind(event)"),this.email.focus(),this.pass.parentNode.remove(),this.button.innerHTML="שלח לי סיסמא",this.button.classList.remove("error"),this.link.innerHTML="לנסות להתחבר מחדש",this.link.setAttribute("onclick","ui.academy.refresh(true)")},remind:function(e){"use strict";e.preventDefault(),ui.form.accessibility(!1),this.button.classList.add("spin"),fetch(this.fetch+"/forgot",{method:"POST",redirect:"error",body:JSON.stringify({email:this.email.value})}).then(function(e){return e.json()}).then(function(e){var t=ui.academy;ui.form.accessibility(!0),t.button.classList.remove("spin"),e.success?ui.form.el.innerHTML="<h2>פרטי גישה נשלחו למייל שלך</h2><a onclick=ui.academy.refresh(true)>לנסות להתחבר</a>":(t.button.classList.add("error"),t.button.innerHTML="מייל לא רשום, נסי שוב")})["catch"](function(){alert("טעות במערכת, נסי שוב מאוחר יותר")})},logout:function(){"use strict";delete localStorage.user,this.refresh(!0)},date:function(){"use strict";this.currentTime?this.firstSession&&delete this.firstSession:this.firstSession=!0,this.currentTime=this.currentTime||new Date(this.data.date);var e=new Date(this.currentTime.setDate(this.currentTime.getDate()+(this.firstSession?0:this.data.interval))+1e7);return{enabled:+e<=+new Date,format:e.getUTCDate()+"/"+(e.getUTCMonth()+1)}},key:function(e){"use strict";e&&e.target&&13===(e.keyCode||e.which)&&(e.preventDefault(),e.target.click())},events:function(e,t){"use strict";return" onclick=ui.academy.select(this) onkeydown=ui.academy.key(event)"+(e?" data-session="+e:"")+(t?" data-page="+t:"")+" tabindex=0"},isLogged:function(){"use strict";this.data.date=1e3*this.user.created,ui.d.documentElement.classList.remove("stretch"),ui.d.documentElement.classList.add("logedin"),this.details.remove(),this.account=ui.d.getElementById("account"),this.account.outerHTML='<div class=profile>    <img src="https://gravatar.com/avatar/'+this.user.avatar+'?s=42&r=g&d=mm">    <div class="table center">        <div class=cel>'+(this.user.firstName?"            <div class=nowrap dir=auto>"+this.user.firstName+"</div>":"")+"            <small onclick=ui.academy.logout()>התנתק</small>        </div>    </div></div>",delete this.details,delete this.account;var e,t,i,a,s=this.data.init,l=ui.hash("session"),o="";o+='<div class="column nav-container" id=nav dir=ltr><div class=nav dir=rtl>    <a class=active'+this.events()+"><label>"+s.title+"</label></a></div>",s=this.data.session,o+="<ol class=nav dir=rtl>";for(e in s)if(s.hasOwnProperty(e)&&(a=s[e].date||this.date(),o+="    <li"+(e===l?" class=expand":"")+"><label"+(a.enabled?this.events(e):" disabled")+"><time>"+a.format+"</time><div>"+s[e].title+"</div></label>",t=s[e].pages,t&&a.enabled)){o+="<ol>";for(i in t)t.hasOwnProperty(i)&&(o+="    <li><a"+this.events(e,i)+">"+t[i].title+"</a>");o+="</ol>"}o+='</ol></div><div class="column content" id=content></div>',this.content.outerHTML="<div class=container>"+o+"</div>",this.content=ui.d.getElementById("content"),this.nav=ui.d.getElementById("nav"),this.toggleNav(!0)},list:function(e,t,i){"use strict";var a="";if(e.value)switch(e.type){case"video":a="https://img.youtube.com/vi/"+e.value+"/maxresdefault.jpg";break;case"document":a="https://drive.google.com/thumbnail?authuser=0&sz=w640&id="+e.value;break;case"qa":a="/assets/"+e.value;break;default:a=""}return e?'<a class="absolute cover"'+this.events(t,i)+' style="background-image:url('+a+')"><h3 class=nowrap>'+e.title+"</h3></a>":""},report:function(){"use strict"},qa:function(e){"use strict";function t(e,i,a){var s,l,o,n=i!==!1,r="";if(i=i||0,n&&!a&&(i+=1),e){if(n&&(l=!e.question,s=!l&&Math.random().toString(16).substr(2,8),r+=(a?"":"<ol>")+"<li><input type=radio name="+i+" id="+s+"><label onclick="+(e["final"]?'"ui.academy.qa.dialog(event, '+i+", '"+e["final"]+"')\"":"ui.academy.qa.click(event) for="+s)+">"+e.title+"</label>"),Array.isArray(e.question)){i+=1,r+="<ol>";for(o in e.question)r+=t(e.question[o],i,!0);r+="</ol>"}else e.question&&(r+=t(e.question,i));n&&(r+="</li>"+(a?"":"</ol>"))}return r}return this.qa.click=function(e){var t,i,a,s,l=e.target,o="true"===l.getAttribute("data-active");if(o){for(e.preventDefault(),i=l.parentNode.querySelectorAll("[data-active]"),a=0;a<i.length;a+=1)i[a].removeAttribute("data-active");for(i=l.parentNode.querySelectorAll("input:checked"),a=0;a<i.length;a+=1)i[a].checked=!1}else l.setAttribute("data-active",!0);for(i=l.parentNode.parentNode.children,a=0;a<i.length;a+=1)if(o||i[a]!==l.parentNode)for(t=i[a].querySelectorAll("label"),s=0;s<t.length;s+=1)o?t[s].removeAttribute("disabled"):t[s].setAttribute("disabled",!0);else l.removeAttribute("disabled")},this.qa.dialog=function(t,i,a,s){var l=s||t.target,o=e["final"][a],n="";return!s&&t&&this.click(t),l&&o&&(n+='<div class="dialog'+(s?" final":"")+'">   <div class=table>   <div class=cel>'+(s?"":"       <div class=close onclick=ui.academy.qa.reset(this) tabindex=0></div>")+"       <h1 class=nowrap>"+o.title+"</h1>"+(s?"":"       <p>שימי לב, אחרי הורדה לא ניתן לשנות קטגוריה</p>")+"       <div><a class=button"+(s?' href="https://drive.google.com/file/d/'+o.value+'/view" target=_blank':" onclick=\"ui.academy.qa.final(this, '"+a+"')\" tabindex=0")+">"+(s?"להוריד סרגל צבעים":"לקבל סרגל צבעים")+"</a></div>   </div>   </div></div>",s||(l=1===i?l.parentNode:l.parentNode.parentNode.parentNode,l.insertAdjacentHTML("afterbegin",n))),n},this.qa.reset=function(e){e&&e.parentNode.parentNode.parentNode.remove();var t,i=ui.d.querySelectorAll(".qa [disabled]");for(t=0;t<i.length;t+=1)i[t].removeAttribute("disabled");for(i=ui.d.querySelectorAll(".qa input:checked"),t=0;t<i.length;t+=1)i[t].checked=!1;for(i=ui.d.querySelectorAll(".qa [data-active]"),t=0;t<i.length;t+=1)i[t].removeAttribute("data-active")},this.qa["final"]=function(e,t){e&&(e.setAttribute("disabled",!0),e.classList.add("spin"));var i={email:ui.academy.user.email,token:ui.academy.user.token,data:{qa:t}},a=ui.d.querySelector(".qa .close");a&&a.remove(),ui.form.accessibility(!1,ui.d.querySelector(".qa")),fetch(ui.academy.fetch+"/update",{method:"POST",redirect:"error",body:JSON.stringify(i)}).then(function(e){return e.json()}).then(function(e){return!e.error&&e}).then(function(e){ui.academy.user=e,localStorage.user=JSON.stringify(e),ui.academy.refresh()})["catch"](function(){ui.academy.user.reportDate=new Date,ui.academy.user.reportData=i,ui.academy.report("update",ui.academy.user),e&&e.remove(),delete localStorage.user,alert("טעות במערכת, נסי שוב מאוחר יותר"),ui.academy.refresh(!0)})},"<div class=qa>    <h1>"+e.title+"</h1>"+(this.user.task&&this.user.task.qa?this.qa.dialog(null,0,this.user.task.qa,!0):t(e,!1))+"</div>"},session:function(){"use strict";if(this.valid&&this.content){var e,t,i,a=ui.hash("session"),s="";if(this.self=a?this.data.session[a]:-1===location.href.indexOf("#")||!location.hash&&!history.pushState?this.data.init:null,!this.self||a&&this.nav&&!this.nav.querySelector('[data-session="'+a+'"]:not([data-page])'))delete this.self,this.refresh(!0);else if(e=ui.hash("page"),i=this.self.page||this.self.pages,this.bar&&this.bar.checked&&(this.bar.checked=!1),i)if(a&&!e){s+="<ol class=items>";for(t in i)i.hasOwnProperty(t)&&(s+="    <li>"+this.list(i[t],a,t)+"</li>");s+="</ol>",this.content.innerHTML=s,ui.comment&&ui.comment.remove()}else if(i=a?i&&i[e]:i){switch(i.type){case"video":s+='<div class=video>    <iframe src="https://www.youtube.com/embed/'+i.value+'?showinfo=0" allowfullscreen></iframe></div><div class=space><h1>'+i.title+"</h1></div>";break;case"document":s+='<div class=video>    <iframe src="https://drive.google.com/file/d/'+i.value+'/preview" allowfullscreen></iframe></div><div class=space>    <h1>'+i.title+'</h1>    <a class=button href="https://drive.google.com/uc?export=download&id='+i.download+'" target=_blank download="'+i.title+'.pdf"><b>להוריד '+i.title+"</a></div>";break;case"qa":s+=this.qa(i)}this.content.innerHTML=s,this.self=i,ui.comment&&ui.comment.load(this.content)}}},toggleNavClassName:function(e,t){"use strict";if(e){var i={session:this.dataset(e,"session"),page:this.dataset(e,"page")},a=i.page||!i.session?"active":"expand",s=this.nav&&this.nav.querySelector("."+a),l=this.nav&&this.nav.querySelector(".selected");i=this.serialize(i),!t&&l&&l.classList.remove("selected"),s&&s.classList.remove(a),i.page||(s=this.nav&&this.nav.querySelector(".active"),s&&s.classList.remove("active")),e&&(t||i.page||e.classList.add("selected"),e.classList.add(a))}},toggleNav:function(e){"use strict";var t,i=ui.hash("session"),a=ui.hash("page"),s=location.hash?this.data.session[i]:this.data.init;this.nav&&(s&&(this.toggleNavClassName(this.nav.querySelector(location.hash?'[data-session="'+i+'"]:not([data-page])':"a")),s.pages&&s.pages[a]&&this.toggleNavClassName(this.nav.querySelector('[data-session="'+i+'"][data-page="'+a+'"]'))),e&&!location.hash&&(t=this.nav.querySelectorAll("[data-session]:not([data-page])"),this.toggleNavClassName(t[t.length-1],!0))),this.session()},legacy:function(){"use strict";!ui.w.Promise&&ui.asyncScript&&ui.asyncScript("https://cdn.polyfill.io/v2/polyfill.min.js?features=fetch")},init:function(){"use strict";this.legacy(),this.valid=!!this.user.email&&!!this.user.token,this.content=ui.d.getElementById("content"),this.details=ui.d.getElementById("details"),this.bar=ui.d.getElementById("bar"),ui.d.getElementById("loading").remove(),this.content.removeAttribute("hidden"),this.valid?this.isLogged():(ui.form.el=ui.d.getElementById("form"),this.button=ui.d.getElementById("button"),this.email=ui.d.getElementById("email"),this.pass=ui.d.getElementById("pass"),this.link=ui.d.getElementById("link"),this.details.removeAttribute("hidden")),ui.w.onhashchange=ui.w.onhashchange||function(){ui.academy.toggleNav()}}},ui.academy.init();