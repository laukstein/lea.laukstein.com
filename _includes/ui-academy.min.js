!function(){"use strict";var o={},d={};function t(t,e){var a={};try{a=JSON.parse(localStorage[t])}catch(e){delete localStorage[t]}return"function"==typeof e?e(a):a}d.el={},d.hashData={},d.endpoint=function(){for(var e=location.hostname.split(".");2<e.length;)e.shift();return"https://lab."+e.join(".")+"/webhook"}(),d.sessionData=t("session",function(e){return e.email&&e.token?e:t("user",function(e){return e.email&&e.token&&(localStorage.session=localStorage.user,delete localStorage.user,ui.setUser(e)),e})}),d.sessionLogedin=function(){ui.d.documentElement.classList.remove("stretch"),ui.d.documentElement.classList.add("logedin"),d.el.details.remove(),d.el.account=ui.d.getElementById("account"),d.el.account.outerHTML='<div class=profile>    <img src="https://gravatar.com/avatar/'+d.sessionData.avatar+'?s=42&r=g&d=mm">    <div class="table center">        <div class=cel>'+(d.sessionData.firstName?"            <div class=nowrap dir=auto>"+d.sessionData.firstName+"</div>":"")+"            <small onclick=ui.academy.sessionLogout()>התנתקי</small>        </div>    </div></div>",delete d.el.details,delete d.el.account;var o=d.hashData.session,n=d.pageSchema.package,l={generateEvents:function(e,t){return" onclick=ui.academy.navClick(this) onkeydown=ui.academy.navKeydown(event)"+(e?" data-session="+e:"")+(t?" data-page="+t:"")+" tabindex="+(t?-1:0)},generateDateObject:function(e){e=e||{};var t=new Date(e.startDate.setDate(e.startDate.getDate()+(e.sessionInterval?e.sessionInterval*d.pageSchema.sessionInterval:e.firstSession?0:d.pageSchema.sessionInterval))+(e.sessionInterval?0:1e7));return t.setHours(0,0,0,0),{enabled:+t<=+new Date,format:e.format||d.formatDate(t.getDate())+"/"+d.formatDate(t.getMonth()+1)}},packageStartDate:function(e){var t=d.sessionData.startDate||d.sessionData.package[e]||d.sessionData.created;return new Date(+new Date(1e3*t).setHours(0,0,0,0))},generatePage:function(e,t,a){var n,i=e.pages,s="";if(i&&(!a||a.enabled)){for(n in s+="<ol>",i)Object.prototype.hasOwnProperty.call(i,n)&&(s+="<li><a class=unselectable"+l.generateEvents(t,n)+">"+i[n].title+"</a></li>");s+="</ol>"}return s},generateSession:function(e,t){var a,n,i={},s="";for(a in i.startDate=l.packageStartDate(t),s+='<ol class="sidenav counter" dir=rtl>',e)Object.prototype.hasOwnProperty.call(e,a)&&(i.sessionInterval=e[a].date&&e[a].date.sessionInterval,i.firstSession=!Object.prototype.hasOwnProperty.call(i,"firstSession"),n=l.generateDateObject(i),s+="<li><label"+(a===o?" class=expand":"")+(n.enabled?l.generateEvents(a):" disabled")+"><time>"+n.format+"</time><div>"+e[a].title+"</div></label>"+l.generatePage(e[a],a,n)+"</li>");return s+="</ol>"},generatePackage:function(e){var t=n[e],a="";return t.session?a+="<div class=sidenav dir=rtl><a class=active"+l.generateEvents()+"><label>"+(t.shortTitle||t.title)+"</label></a></div>"+l.generateSession(t.session,e):a+='<ol class=sidenav dir=rtl><li><label class="expand selected active"'+l.generateEvents(e)+">"+t.title+"</label>"+l.generatePage(t,e)+"</li></ol>",a}};d.el.content.outerHTML='<div class=container>    <div class="column nav-container" id=sidenav role=navigation dir=ltr>'+Object.keys(n).map(l.generatePackage).join("\n")+'    </div>    <div class="column content" id=content></div></div>',d.el.content=ui.d.getElementById("content"),d.el.sidenav=ui.d.getElementById("sidenav"),d.toggleNav(!0)},o.sessionRefresh=function(e){e?ui.w.location=location.pathname:location.reload()},d.sessionLogin=function(e){e.preventDefault(),ui.form.accessibility(!1,null,!0),fetch(d.endpoint+"/login",{method:"POST",redirect:"error",body:JSON.stringify({email:d.el.email.value.toLowerCase(),pass:d.el.pass.value})}).then(function(e){return e.json()}).then(function(e){d.sessionUpdate(e),d.workerUpdate({status:"login"}),ui.setUser(e),ui.form.accessibility(!0,null,!0),e.email&&e.token?o.sessionRefresh():d.el.button&&(d.el.button.classList.add("error"),d.el.button.innerHTML="הפרטים שגויים, נסי שוב")}).catch(function(){ui.form.accessibility(!0,null,!0),d.el.button&&(d.el.button.classList.add("error"),d.el.button.innerHTML="טעות במערכת, נסי שוב מאוחר יותר")})},o.sessionLogout=function(e){delete localStorage.session,e||d.workerUpdate({status:"logout"}),o.sessionRefresh(!0)},d.getUserDefaultPackage=function(e){if(e&&e.package){if(Object.keys(e.package).includes(d.pageSchema.fullPackage))return d.pageSchema.fullPackage;var t,a=Object.keys(d.pageSchema.package);for(t=0;t<a.length;t+=1)if(e.package[a[t]])return a[t]}return""},d.sessionUpdate=function(e,t){"object"==typeof e&&(t||d.workerUpdate({status:"update",data:e}),d.sessionData=e,localStorage.session=JSON.stringify(e))},d.sessionVerify=function(a){var t="verify",n={email:d.sessionData.email,token:d.sessionData.token};fetch(d.endpoint+"/"+t,{method:"POST",redirect:"error",body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){var t=d.getUserDefaultPackage(e);return e.error||!t?Promise.reject(e):(d.sessionUpdate(e),"function"==typeof a&&a(t),Promise.resolve(e))}).catch(function(e){console.error(e),d.sessionErrorReport(t,n)})},d.sessionForgot=function(){d.el.form.removeEventListener("submit",d.sessionLogin),d.el.form.addEventListener("submit",d.sessionRemind),d.el.email.focus(),d.el.pass.parentNode.remove(),d.el.button.innerHTML="שלח לי סיסמא",d.el.button.classList.remove("error"),d.el.link.innerHTML="לנסות להתחבר מחדש",d.el.link.removeEventListener("click",d.sessionForgot),d.el.link.addEventListener("click",o.sessionRefresh)},d.sessionRemind=function(e){e.preventDefault(),ui.form.accessibility(!1,null,!0),fetch(d.endpoint+"/forgot",{method:"POST",redirect:"error",body:JSON.stringify({email:d.el.email.value.toLowerCase()})}).then(function(e){return e.json()}).then(function(e){ui.form.accessibility(!0,null,!0),e.success?d.el.form.innerHTML="<h2>פרטי גישה נשלחו למייל שלך</h2><a onclick=ui.academy.sessionRefresh(true)>לנסות להתחבר</a>":(d.el.button.classList.add("error"),d.el.button.innerHTML="מייל לא רשום, נסי שוב")}).catch(function(){ui.form.accessibility(!0,null,!0),d.el.button&&(d.el.button.classList.add("error"),d.el.button.innerHTML="טעות במערכת, נסי שוב מאוחר יותר")})},d.sessionError=function(){if(sessionStorage.sessionError){var e=ui.d.getElementById("session-error");e&&(e.hidden=!1,e.innerHTML=sessionStorage.sessionError,delete sessionStorage.sessionError)}},d.sessionErrorReport=function(e,t){"prod"===ui.environment?"sendBeacon"in navigator&&navigator.sendBeacon(d.endpoint+"/error",JSON.stringify({schema:e,email:d.sessionData.email,log:JSON.stringify(t,null,2)})):(console.error(e,t),console.trace&&console.trace()),sessionStorage.sessionError="זהינו שלא פעלת בחשבונך בדקות האחורנות. אנה התחברי שוב.",delete localStorage.session,o.sessionRefresh()},d.sessionPage=function(){if(d.valid&&d.el.content){var e=d.getCurrentSchema(),t="";delete o.schema,delete o.fn,!e||d.hashData.session&&d.el.sidenav&&!d.el.sidenav.querySelector('[data-session="'+d.hashData.session+'"]:not([data-page])')?o.sessionRefresh(!0):(d.el.bar&&d.el.bar.checked&&(d.el.bar.checked=!1),!d.hashData.session||d.hashData.session&&!d.hashData.page?((o.schema=e).video&&(t+=d.pageUI.generateVideo(e)),"function"==typeof e.generateHTML&&(t+=e.generateHTML())):(d.hashData.session&&(e=e.pages&&e.pages[d.hashData.page]),e&&((o.schema=e).video?t+=d.pageUI.generateVideo(e):"function"==typeof d.pageUI[e.type]&&(t+=d.pageUI[e.type](e),d.pageUI[e.type].fn&&(o.fn=d.pageUI[e.type].fn)),e.pinterest&&(t+='<div class=pinterest><a data-pin-do=embedBoard data-pin-board-width=900 data-pin-scale-height=631 data-pin-scale-width=115 href="'+d.htmlSafe(e.pinterest)+'">'+e.pinterest+"</a></div>"))),d.el.content.innerHTML=t,e.pinterest&&(ui.w.PinUtils?PinUtils.build():ui.asyncScript("https://assets.pinterest.com/js/pinit.js")),e?(!e.video&&"video"!==e.type||ui.video.applyPlyr(),ui.comment&&ui.comment.load(d.el.content)):ui.comment&&ui.comment.remove())}},d.pageSchema={fullPackage:"full",sessionInterval:7,package:{closet:void 0,full:{title:"ברוכה הבאה לקורס סטייל שבא מבפנים",shortTitle:"סטייל שבא מבפנים",video:"yCsI9dSOvK0",session:{colours:{title:"הצבע הזה הוא אני",video:"6fuubXrOQ6c",pages:{colorPlates:{title:"לוחות צבעים",video:"_dohRGGGLmQ"},qa:{type:"qa",title:"מחשבון צבעים",value:"academy-colours.jpg",option:[{title:"האם צבע השיער שלך שחור או חום כהה?",option:[{title:"העיניים שלך מבריקות, בולטות, בצבע ירוק כהה, ירוק זית? האם יש קונטראסט בין הלבן בעיניים לבין האישון?",final:"clear"},{title:"העיניים שלך בצבע חום כהה?",final:"deep"},{title:"העיניים שלך בהירות, בצבע כחול, ירוק בהיר או אפור בהיר?",final:"bright"}]},{title:"האם צבע השיער שלך בלונד בהיר, אפור בהיר, חום בהיר?",option:[{title:"העיניים שלך בהירות בצבעים כחול, אפור או ירוק בהיר?",final:"bright"},{title:"העיניים שלך בצבע חום בהיר, מתמזגות עם צבע השיער?",final:"mixed"}]},{title:"האם צבע השיער שלך חום בינוני או עכברי, אפור בינוני, בלונד אפורי, בלונד כהה?",option:[{title:"העיניים שלך בהירות בצבעים כחול בהיר, אפור או ירוק בהיר?",final:"bright"},{title:"העיניים שלך חום בהיר, מתמזג עם צבע השיער?",final:"mixed"}]},{title:"האם צבע השיער שלך ג'ינג'י, דבש, ערמוני, והעיניים שלך ירוק חם כהה, חום ירקרק, חום דבש, כחול ירוק?",final:"warm"},{title:"האם צבע השיער שלך חום אפרפר (עכברי), בלונדי-אפרורי, כסוף, שיבה אפור, והצבע העיניים שלך כחול או חום או ירקרק?",final:"cold"}],final:{clear:{title:"את צלולה",value:"1RBWFZEoSG2IBhZWX74-bFerykqF1sJns"},deep:{title:"את עמוקה",value:"1dB3YO4ph2X6G-5ljir0RLUUQn3l7tkTZ"},bright:{title:"את בהירה",value:"1F1juuLT-pHxU4FVlLEFXamQKesNd3AzO"},mixed:{title:"את מעורבת",value:"1bmSwDG6GGggZTUuNjDHxZNMSlwYa8SuW"},warm:{title:"את חמה",value:"1lml4F6bRh9yiz47x-t7Xs5sWjlo1mE9i"},cold:{title:"את קרה",value:"1OOitln7OtHB7qvUqvhvkHI7XnmLLwPUR"}}}}},bodyShape:{title:"כמה טוב להיות את!",video:"xZMfS-HXqXM",pages:{bodyType:{type:"bodyType",title:"מחשבון מבנה הגוף",value:"1gKI_JUyD20fvq27_B3Kxq9vfJ6f99xLnnd1ht1vibhU",button:"הצג תוצאה",notice:"שימי לב, חישוב ניתן רק לפעם אחת",result:"את בעלת מבנה גוף {0}",download:"להורדת מדריך הגיזרות",error:"שגיאה בחישוב, {0}נא לפנות ללאה{1}",option:{height:"הגובה",shoulders:"היקף הכתפיים",bust:"היקף החזה",waist:"היקף המותניים",hips:"היקף הירכיים"},final:{hourglass:{title:"שעון חול",value:"1r5TBnSpeNRjTmwIaoKkiiqBBzNhESmdj",text:["מכיוון שהמבנה שלך הוא מאוזן, כל גזרה תחמיא לך.","עלייך להדגיש את קו המותן שלך – כדי לשמור על הפרופורציות הטבעיות והיפות שלך.","בנוסף הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","את בעלת מבנה גוף רזה – בדים מחויטים יחמיאו לך."]},hourglassrounded:{title:"שעון חול מעוגל",value:"1r5TBnSpeNRjTmwIaoKkiiqBBzNhESmdj",text:["מכיוון שהמבנה שלך הוא מאוזן, כל גזרה תחמיא לך.","עלייך להדגיש את קו המותן שלך – כדי לשמור על הפרופורציות הטבעיות והיפות שלך.","בנוסף הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","את בעלת מבנה גוף מתעגל – בדים רכים ונשפכים יחמיאו לך במיוחד."]},invertedtriangle:{title:"משולש הפוך",value:"1_ekRaH2x8iP4jYovBSpVZuNUquO_WiJI",text:["עלייך להדגיש את קו המותן שלך – כדי לחלק את הגוף לפרופורציות הנכונות ⅓ ו2/3. הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","כדי ליצור מראה מאוזן של שעון חול – לבשי פריטים היוצרים קווי אורך בפלג הגוף העליון, כמו עליונית פתוחה או שרשרת ארוכה.","לאיזון, צרי נפח בפלג גוף התחתון שלך.","את בעלת מבנה גוף רזה – בדים מחויטים יחמיאו לך.","שימי לב שהתפר המחבר בין השרוול לכתף ממוקם בדיוק בעצם הכתף."]},invertedtrianglerounded:{title:"משולש הפוך מעוגל",value:"1_ekRaH2x8iP4jYovBSpVZuNUquO_WiJI",text:["עלייך להדגיש את קו המותן שלך – כדי לחלק את הגוף לפרופורציות הנכונות ⅓ ו2/3. הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","כדי ליצור מראה מאוזן של שעון חול – לבשי פריטים היוצרים קווי אורך בפלג הגוף העליון, כמו עליונית פתוחה או שרשרת ארוכה.","לאיזון, צרי נפח בפלג גוף התחתון שלך","את בעלת מבנה גוף מתעגל – בדים רכים ונשפכים יחמיאו לך במיוחד.","שימי לב שהתפר המחבר בין השרוול לכתף ממוקם בדיוק בעצם הכתף."]},rectangle:{title:"ישר",value:"1hRie1lANjULGnlUDrnUVPYjCxrD4n6Ws",text:["עלייך להדגיש את קו המותן שלך – כדי לחלק את הגוף לפרופורציות הנכונות ⅓ ו2/3. הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","לבשי פריטים בעלי נפח בכתפיים – כדי לייצר מראה גוף מאוזן של שעון חול.","פריטים המרחיבים את הירכיים יוסיפו לאיזון.","את בעלת מבנה גוף רזה וישר – בדים מחויטים יחמיאו לך."]},rectanglerounded:{title:"ישר מעוגל",value:"1hRie1lANjULGnlUDrnUVPYjCxrD4n6Ws",text:["עלייך להדגיש את קו המותן שלך – כדי לחלק את הגוף לפרופורציות הנכונות ⅓ ו2/3. הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","לבשי פריטים בעלי נפח בכתפיים – כדי לייצר מראה גוף מאוזן של שעון חול.","פריטים המרחיבים את הירכיים יוסיפו לאיזון.","את בעלת מבנה גוף מתעגל – בדים רכים ונשפכים יחמיאו לך במיוחד."]},round:{title:"מעוגל",value:"1JWcPbgHI6uQRGVpr82zg5l79yDYYp39P",text:["עלייך להדגיש את קו המותן שלך – כדי לחלק את הגוף לפרופורציות הנכונות ⅓ ו2/3. הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","כדי ליצור מראה מאוזן של שעון חול – לבשי פריטים היוצרים קווי אורך בפלג הגוף העליון, כמו עליונית פתוחה או שרשרת ארוכה.","לאיזון, תדגישי את פלג הגוף התחתון שלך.","את בעלת מבנה גוף מתעגל – בדים רכים ונשפכים יחמיאו לך במיוחד.","שימי לב שהתפר המחבר בין השרוול לכתף ממוקם בדיוק בעצם הכתף."]},triangle:{title:"משולש",value:"1ZFVcrckN8LhfZ8Gp9K7N1OUAn-BicVhD",text:["עלייך להדגיש את קו המותן שלך – כדי לחלק את הגוף לפרופורציות הנכונות ⅓ ו2/3. הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","לבשי פריטים בעלי נפח בכתפיים – כדי לייצר מראה גוף מאוזן של שעון חול.","בחרי בגדים שלא ייצמדו לירכיים, כדי לא להדגיש את פלג הגוף הרחב שלך.","את בעלת מבנה גוף רזה וישר – בדים מחויטים יחמיאו לך."]},trianglerounded:{title:"משולש מעוגל",value:"1ZFVcrckN8LhfZ8Gp9K7N1OUAn-BicVhD",text:["עלייך להדגיש את קו המותן שלך – כדי לחלק את הגוף לפרופורציות הנכונות ⅓ ו2/3. הדגשת מותן יוצרת אשליה של גוף צר וארוך יותר.","לבשי פריטים בעלי נפח בכתפיים – כדי לייצר מראה גוף מאוזן של שעון חול.","בחרי בגדים שלא ייצמדו לירכיים, כדי לא להדגיש את פלג הגוף הרחב שלך.","את בעלת מבנה גוף מתעגל – בדים רכים ונשפכים יחמיאו לך במיוחד."]}}}}},style:{title:"על טעם, ריח, ואופי",video:"06Q_GGX5KLQ",pages:{sat:{type:"sat",title:"מחשבון סגנון הלבוש",next:"המשך",back:"חזור",button:"הצג תוצאה",limit:"סמני מקסימום שתי תשובות",value:"academy-style.jpg",option:[{title:"כיצד את בוחרת את צבעי הבגדים שלך?",option:{A:"בהתאם למצב רוח שלי באותו יום",B:"צבעים חזקים וקונטרסטים",C:"צבעי פסטל",D:"פריטי לבוש המתאימים מבחינת הצבעים, הבדים או הדוגמאות",E:"בשילובי צבעים ניטרליים ופשוטים או בצבעי אדמה"}},{title:"כיצד תגדירי את סגנון הקניות שלך?",option:{A:"אוהבת לקנות בשווקים, יד שניה ובמבצעים",B:"קונה בלי לחשוב פעמיים כל דבר שמוצא חן בעיני",C:"הקניות עושות אותי שמחה ואני נהנת, אני יוצאת לקניות כשאני רוצה לשפר מצב רוח שלי",D:"הקניות שלי מתוכננות ונעשות על פי רשימה מוכנה מראש, משקיעה בפריטים איכותיים וקלאסיים שתמיד באופנה",E:"קונה בהתאם לצורך או לקראת אירועים מיוחדים. לא מוכנה לוותר על נוחות, במקרה הצורך אלך לתופרת"}},{title:"כיצד היית מגדירה את הופעתך באופן כללי?",option:{A:"בעלת סגנון ייחודי המשלב פריטים שונים ויוצאי דופן",B:"בעלת אמירה אופנתית ופריטים המושכים תשומת לב",C:"אוהבת בגדים עם קישוטים עדינים הגורמים לי להרגיש נשית",D:"נקי ואלגנטי",E:"אוהבת בגדים נוחים"}},{title:"איזה מהפריטים בארון שלך משמשים אותך לעבודה?",option:{A:"פריטי לבוש אקראיים שאני מערבבת ביניהם לפי טעמי האישי",B:"פריטים יוצאי דופן שתופסים את העין",C:"חולצות יפות ועליוניות שאני משלבת עם חצאיות",D:"פריטים בסיסיים הניתנים לשדרוג עם אביזרים, פריטים מחויטים",E:"פריטי לבוש יום יומיים, כמו מכנסי ג'ינס וחולצה פשוטים"}},{title:"איזה מהפריטים בארון שלך משמשים אותך לשעות הפנאי?",option:{A:"אוסף פריטי לבוש בסגנון רטרו או וינטאג'",B:"הפריטים האופנתיים שנרכשו לאחרונה",C:"פריטים יפים ונשיים, עם תחרות",D:"פריטים בעלי סגנון פשוט שלהם אני מוספיה אביזרים",E:"בגדים נוחים ואיכותיים, מכותנה או פשתן, טוניקות"}},{title:"איזה מהפריטים בארון שלך שמורים לאירועים מיוחדים?",option:{A:"שילבו בדים מיוחדים או גזרות מעניינות",B:"פריטים מיוחדים וגרנדיוזיים המושכים תשומת הלב",C:"שמלות נשיות וקלילות ומקושטות ועשויים מבדים קלילים",D:"חליפה אלגנטית ומחויטת או שמלה קלאסית וסולידית בשילוב תכשיטים אופנתיים",E:"חצאית אלגנטית ארוכה ונוחה או מכנסיים בשילוב עם חולצה נוחה וחגיגית או טוניקה"}},{title:"כיצד תתארי את הנעליים שלך?",option:{A:"לאו דווקא מתאימות ללבוש שלי אבל מיוחדות",B:"לרוב בעלות עקבים",C:"יפות עם סרטים או קישוטים",D:"קלאסיות, מתאימות להרבה בגדים",E:"נוחות ושטוחות"}},{title:"איזה סוג תכשיטים את אוהבת?",option:{A:"לא שגרתיים, ממש פריטי אספנות",B:"גדולים ובעלי אמירה אישית",C:"מורכבים ועשירים מאוד בפריטים, עם סלסולים ופרחים",D:"בעלי קו מעודן וקלאסי, עשויים מזהב או כסף",E:"עשויים בדרך כלל מחומרים טבעים"}},{title:"מהו יחסך לנושא האיפור?",option:{A:"אוהבת להתנסות בדברים חדשים ומתחדשים כל הזמן",B:"אוהבת אותו מודגש וקצת מוגזם",C:"אוהבת ומשקיעה בו זמן רב",D:"לא מחדשת, דבקה בהרגלים שלי, אבל חשוב ומשלים את ההופעה שלי",E:"מינימליסטי, אם בכלל"}},{title:"מהו סגנון כיסוי ראש / שיער שלך?",option:{A:"משתנה בהתאם למצב הרוח שלי",B:"משתנה בקביעות, משתנה בצבעוניות",C:"אוהבת להוציא שיער בצדדים. שיער ארוך",D:"מעודן ומשתלב עם הלבוש שלי",E:"דורש תחזוקה מינימלית"}},{title:"כשאת בוחרת חולצה מודפסת היא תהיה____?",option:{A:"הדפס בסגנון חדש, שאין לי בארון",B:"הדפס דומיננטי",C:"עדין עם נקודות או פרחים קטנים",D:"בדרך כלל קונה פריטים ללא הדפס",E:"אוהבת חלק וגם אוהבת הדפס אתני"}},{title:"באיזה סגנון את רואה את עצמך מתלבשת?",limit:"סמני תשובה אחת",showImage:!0,condition:function(e){var t,a,n=ui.academy.schema.final,i=this.id&&ui.d.getElementById(this.id);if(e={C:["C","F"],E:["E","G"],CD:["C","D"]}[JSON.stringify(e).replace(/[[,\]"]/g,"")],this.option={},Array.isArray(e))for(a=0;a<e.length;a+=1)this.option[e[a]]=n[e[a]];return t=!!Object.keys(this.option).length,i&&t&&this.callback&&(i.innerHTML=this.callback.apply(null,this.params).replace(/^<li\b[^>]*>|<\/li>$/g,"")),t}}],success:{title:"הסגנון שלך הוא {0}",button:"להורדת חוברת הסגנון"},final:{A:{title:"יצירתי",value:"1dl0GD7_hE4HgAwybk9wSbn_bke47V0cZ"},B:{title:"דרמטי",value:"1c4WdteW3cNCkpHWzHKmCPRtJsZvT_hKI"},C:{title:"רומנטי",value:"1MHFG3yneMT4H0FJOAVi_pqNlpjMQG7F7"},D:{title:"קלאסי",value:"1nWiD5zvvmDDsuaL_cMGvkBsWow0FuYPl"},E:{title:"טבעי",value:"1d8t_zlmBV8A6x8zVmdgG-YnQVm4JgoQd"},F:{title:"בוהומייני",value:"1uoqQj_hfra3Vp7ovrdQwVBgI2ga21HRR"},G:{title:"קז'ואל",value:"1Zxt08RVGwgyvCFBxt6v-U7pnuEWNx-g-"}}}}},closet:{title:"ארון מדויק",video:"KzC7tJRjxqc",text:'מיני קורס "קניות לשב אחרי שלב" הוא למעשה תיעוד של סיבוב קניות אמיתי. הקורס מלמד איך מזהים את הבגד שיחמיא לך, עוד לפני שמודדים. ההשקעה שלך, בתור משתתפת מיני קורס "ארון מדויק" 380 ~(במקום 450)~',pages:{clearingCloset:{title:"פינוי ארון",video:"FiMXsvqCDZ8"},bodyType:void 0,orderCloset:{title:"סדר תכלס",video:"ZzK_ol7qLPs",download:{title:"להורדת חוברת ארון הקסמים",value:"1Ee5Zh92agzw6qkRsKE40t4zpwiw-DQTg"}},clothesSum:{type:"clothesSum",title:"מחשבון כמויות הבגדים",question:{option:{shabbat:{question:"כמה סטים את לובשת בשבת?",answer:{1:1,2:2,3:3}},dress:{question:"האם את נוהגת ללבוש שמלות?",answer:{yes:"כן תמיד",no:"בכלל לא",shabbat:"רק בשבתות",sometimes:"לפעמים"}},cover:{question:"האם את נוהגת ללבוש מטפחות או כובעים?",answer:{yes:"כן",no:"לא"}}},error:"תעני על כל השאלות",button:{success:"המשך"}},activity:{label:["סוג הפעילות","כמות הפעילויות בחודש"],option:{job:"ימי עבודה",evening:"בילוי ערב",shabbat:"שבת",sport:"ספורט","":"אחר"},error:"תמלאי לפחות שדה אחד",button:{back:"חזור",create:"להוסיף פעילות נוספת",remove:"הסר",success:"חישוב"}},sum:{label:["סוג",'ס"כ הבגדים','ס"כ שילובים'],option:{cover:{title:"מטפחות",perc:22},chain:{title:"שרשראות נוכחות",perc:5},bag:{title:"תיקים",perc:5},shoe:{title:"נעליים",perc:11}},sets:{dress:"שמלות",jacket:"ז'קטים",shirt:"חולצות",skirt:"חצאיות"},button:{retry:"חישוב מחדש"}}},winterClothes:{title:"בגדי חורף",video:"2_QEgMc6ieg",pinterest:"https://www.pinterest.com/lealaukstein/סטייל-בחורף/"}}},modularOutfit:{title:"יש לך מה ללבוש",video:"_VYx-UC-VqU",download:{title:"להורדת חוברת מערכת פריטי הבסיס",value:"1kTlj1ZOXh8YQQyJCRuwBoShIfGKkUpLp"}},accessories:{title:"התוספת שתופסת",video:"fOYZbRKMYAE",pages:{coversShoes:{title:"מטפחות ונעליים",video:"JWTBhFri44w",download:{title:"להורדת חוברת האקססוריז",value:"1wPOeaV2Y1xKnOsoOR1VevgU-g0L95cGO"}},matchHeadcover:{title:"בונוס התאמה למבני הפנים",video:"XW4S6zGtGic"}}},lingerie:{title:"יסודות למראה חטוב",video:"qk0-_Dnf3Z4",pages:{material:{title:"צבע, בד וגזרה בהלבשה תחתונה",video:"IpwM9HEeup4",download:{title:"להורדת חוברת הלבשה התחתונה",value:"1E8QTzqkLoWk23ht-BUCHt77QRoYCOuhc"}}}}}}}},d.pageUI={},d.pageUI.generateVideo=function(e){var t,a=e.value||e.video,n="";if(n+="<div class=video>",ui.video.youtubeSupport?n+='<iframe src="https://www.youtube.com/embed/'+a+'" allow="autoplay; encrypted-media; fullscreen" allowfullscreen></iframe>':n+=ui.video.template(a),n+="</div><div class=space><h1>"+e.title+"</h1>",e.text&&(n+="<p>"+e.text.replace(/~(\S(.*?\S)?)~/gm,"<s>$1</s>")+"</p>"),e.pages)for(t in e.pages)Object.prototype.hasOwnProperty.call(e.pages,t)&&(n+='<a class=button href="#session='+d.hashData.session+"&page="+t+'" tabindex=0>'+e.pages[t].title+"</a> ");return e.download&&(n+=d.generateDownloadLink(e.download.value,e.download.title)),n+="</div>"},d.pageUI.qa=function(l){var r=d.pageUI.qa,e=d.sessionData.task&&d.sessionData.task.qa,c={label:function(e,t,a){var n,i,s=!1!==t,o="";if(t=t||0,s&&!a&&(t+=1),e){if(s&&(o+=(a?"":"<ol>")+"<li><input type=radio name="+t+((i=!!e.option&&d.generateID())?" id="+i:"")+"><label onclick="+(e.final?'"ui.academy.fn.dialog(event, '+t+", '"+e.final+"')\"":"ui.academy.fn.click(event) for="+i)+">"+d.generateIcon("check")+e.title+"</label>"),Array.isArray(e.option)){for(n in t+=1,o+="<ol>",e.option)Object.prototype.hasOwnProperty.call(e.option,n)&&(o+=c.label(e.option[n],t,!0));o+="</ol>"}else e.option&&(o+=c.label(e.option,t));s&&(o+="</li>"+(a?"":"</ol>"))}return o}};return r.fn={},r.fn.click=function(e){var t,a,n,i,s="LABEL"===e.target.tagName?e.target:e.target.closest("label"),o="true"===d.getDataAttribute(s,"active");if(o){for(e.preventDefault(),a=s.parentNode.querySelectorAll("[data-active]"),n=0;n<a.length;n+=1)a[n].removeAttribute("data-active");for(a=s.parentNode.querySelectorAll("input:checked"),n=0;n<a.length;n+=1)a[n].checked=!1}else s.setAttribute("data-active","true");for(a=s.parentNode.parentNode.children,n=0;n<a.length;n+=1)if(o||a[n]!==s.parentNode)for(t=a[n].querySelectorAll("label"),i=0;i<t.length;i+=1)o?t[i].removeAttribute("disabled"):t[i].setAttribute("disabled","");else s.removeAttribute("disabled")},r.fn.dialog=function(e,t,a,n){var i=n||e.target,s=l.final[a],o="";return!n&&e&&r.fn.click(e),i&&s&&(o+='<div class="dialog'+(n?" final":"")+'">   <div class=table>   <div class=cel>'+(n?"":"       <div class=close onclick=ui.academy.fn.reset(this) tabindex=0>"+d.generateIcon("close")+"</div>")+"       <h1 class=nowrap>"+s.title+"</h1>"+(n?"":"       <p>שימי לב, אחרי הורדה לא ניתן לשנות קטגוריה</p>")+"       <div>"+(n?d.generateDownloadLink(s.value,"להורדת סרגל הצבעים"):"<a class=button onclick=\"ui.academy.fn.final(this, '"+a+"')\" tabindex=0>לקבל סרגל צבעים</a>")+"</div>   </div>   </div></div>",n||(i=1===t?i.parentNode:i.parentNode.parentNode.parentNode).insertAdjacentHTML("afterbegin",o)),o},r.fn.reset=function(e){e&&e.parentNode.parentNode.parentNode.remove();var t,a=ui.d.querySelectorAll(".qa [disabled]");for(t=0;t<a.length;t+=1)a[t].removeAttribute("disabled");for(a=ui.d.querySelectorAll(".qa input:checked"),t=0;t<a.length;t+=1)a[t].checked=!1;for(a=ui.d.querySelectorAll(".qa [data-active]"),t=0;t<a.length;t+=1)a[t].removeAttribute("data-active")},r.fn.final=function(e,t){var a={email:d.sessionData.email,token:d.sessionData.token,data:{qa:t}},n=ui.d.querySelector(".qa .close");n&&n.remove(),ui.form.accessibility(!1,ui.d.querySelector(".qa"),!0),fetch(d.endpoint+"/update",{method:"POST",redirect:"error",body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return e.error?Promise.reject(e):e}).then(function(e){d.sessionUpdate(e),o.sessionRefresh()}).catch(function(){e&&e.remove(),d.sessionErrorReport("update",a)})},'<div class="form qa">    <h1>'+l.title+"</h1>"+(e?r.fn.dialog(null,0,e,!0):c.label(l,!1))+"</div>"},d.pageUI.bodyType=function(a){var e=d.pageUI.bodyType,t=d.sessionData.task&&(d.sessionData.task.bodyType||d.sessionData.task.calculator),n="",i={height:{min:145,max:280},default:{min:50,max:320}};return e.fn={},e.fn.submit=function(e){if(!e)return e;if("string"==typeof e)switch(e){case"invertedTriangle":return"invertedtriangle";case"rounded":return"round";default:return e}var t=e.shoulders,a=e.bust,n=e.waist,i=e.hips,s=function(e,t,a){return t<=e&&e<=a},o=function(){var e=Array.prototype.slice.call(arguments).map(function(e){return Number(e)}),t=Math.min.apply(null,e),a=Math.max.apply(null,e),n=2===e.length&&e[0]<e[1]?-1:1;return Math.round((a-t)/a*100)*n},l=function(a,t){return Object.keys(a||{}).filter(function(e){return t?t(e,a):a[e]}).reduce(function(e,t){return e[t]=a[t],e},{})},r={minAll:Math.min(t,a,n,i),maxAll:Math.max(t,a,n,i),maxAB2D:o(Math.max(t,a),i)},c={round:5<o(n,Math.min(t,a,i))&&o(Math.max(t,a),Math.min(n,i))<11&&0<o(n,i)};return c.round||(c.hourglass=Math.abs(r.maxAB2D)<11&&o(a,i)<11&&Math.abs(r.maxAB2D)<11&&o(n,Math.round(Math.max(t,a,i)))<-29,c.invertedtriangle=10<o(Math.max(t,a),i),c.rectangle=Math.abs(r.maxAB2D)<11&&s(o(n,Math.max(t,a,i)),-29,5),c.rounded=100<r.maxAll,c.triangle=10<o(i,Math.max(t,a))),c.result=Object.keys(l(c,function(e){return"rounded"!==e})).filter(function(e){return c[e]}).join(""),c.rounded&&(c.result+="rounded"),c.result},t=e.fn.submit(t),n=a.final[t]?'<div class="dialog final">   <div class=table>   <div class=cel>       <h1>'+a.result.format(a.final[t].title)+"</h1>       <ol>           <li>"+a.final[t].text.join("</li>\n<li>")+"</li>       </ol>       <div>"+d.generateDownloadLink(a.final[t].value,a.download)+"</div>   </div>   </div></div>":(Object.keys(a.option).forEach(function(e,t){n+='<li class=row>    <label class="column label" for='+e+">"+a.option[e]+"</label>    <div class=column><input id="+e+" name="+e+" type=number inputmode=numeric min="+(i[e]||i.default).min+" max="+(i[e]||i.default).max+" maxlength=3 dir=ltr data-required"+(t?"":" autofocus")+"></div></li>"}),"<form onsubmit=ui.academy.formSubmit(event) method=post novalidate>    <ul class=sheet>"+n+"</ul>    <div data-status><small><i>"+a.notice+"</i></small></div>    <button>"+a.button+"</button></form>"),'<div class="form calculator">    <h1>'+a.title+"</h1>"+n+"</div>"},d.pageUI.clothesSum=function(r){var c=d.pageUI.clothesSum,e=d.sessionData.task&&d.sessionData.task.clothesSum,o={};return c.value=JSON.parse(JSON.stringify(e||{})),c.value.activity||(c.value.activity={}),c.value.question||(c.value.question={}),c.fn={},o.activityField=function(t,a){var e,n,i=Math.random().toString(16).substr(2,8),s=r.activity.option,o=c.value.activity,l="";return t&&s[t]?(Object.keys(s).forEach(function(e){n=e===t||o[e]&&Object.keys(o).indexOf(e)===a?" selected":"",l+="\n<option"+(e?" value="+e:"")+n+">"+s[e]+"</option>"}),l="<select onchange=ui.academy.fn.edit(event)>"+l+"</select>"):(e=s[t||""],l+='<input list="'+i+'" oninput=ui.academy.fn.edit(event)'+(e?' placeholder="'+e+'"':' value="'+d.htmlSafe(t)+'"')+' dir=rtl><datalist id="'+i+'">    <option>'+Object.values(s).join("</option>\n<option>")+"</option></datalist>"),l},o.number=function(e){return e&&String(Number(e))===e?Number(e):e},c.fn.sum=function(){var e=ui.d.getElementById("clothesSum"),t=ui.form.list("input[type=number]",e);o.getName=function(e){if(e)switch(e.tagName){case"SELECT":return e.options[e.selectedIndex].getAttribute("value");case"INPUT":return e.value.trim()}},c.value.activity={},t.forEach(function(e){var t=e.closest("li").querySelector("select, input"),a=o.getName(t),n=o.number(e.value.trim());a&&n&&n===Number(n)&&(c.value.activity[a]&&(n+=c.value.activity[a]),c.value.activity[a]=n)})},o.html={error:function(e){return"<p class=error data-error hidden>"+d.generateIcon("error")+r[e].error+"</p>"},question:function(i){var s=c.value[i],e=Object.keys(r[i].option);return o[i]=function(e){var t=r[i].option[e],a=s[e],n=t.answer;return'<li class="row qa">    <div class=label'+(a?"":" hidden")+">"+t[i]+"</div>    <select"+(a?"":" class=unselected")+" name="+e+" onchange=ui.academy.fn.edit(event) data-question data-required required>        <option>"+t[i]+"</option>"+Object.keys(n).map(function(e){return"<option value="+e+(a===o.number(e)?" selected":"")+">"+n[e]+"</option>"}).join("\n")+"     </select></li>"},'<ul class="table content">'+e.map(o[i]).join("\n")+'    <li class="row qa">'+o.html.error(i)+"        <button class=next onclick=\"ui.academy.fn.submit(event, '"+i+"')\">"+r[i].button.success+"</button>    </li></ul>"},activity:function(t){var a=c.value[t],n=Object.keys(a).concat(Object.keys(r[t].option));return n=n.filter(function(e,t){return n.indexOf(e)===t}),o[t]=function(e){return"<li class=row>    <div class=column>"+o.activityField(e)+'    </div>    <div class=column>        <a class="button remove" onclick=ui.academy.fn.removeActivity(event)>'+r[t].button.remove+"</a>        <div class=field-wrap><input type=number"+(a[e]?" value="+a[e]:"")+" placeholder=0 inputmode=numeric oninput=ui.academy.fn.sum()></div>    </div></li>"},o.label=function(e){return'<div class="column label">'+e+"</div>"},c.fn.addActivity=function(e){(e||ui.d.getElementById("clothesSum")).insertAdjacentHTML("beforeend",o[t]())},c.fn.removeActivity=function(e){var t=e.target.parentNode.parentNode,a=t.parentNode;t.remove(),c.fn.sum(),a.childElementCount<2&&c.fn.addActivity(a)},'<div class=content>    <ul class="table sheet-fixed" id=clothesSum>        <li class=row>'+r[t].label.map(o.label).join("\n")+"        </li>"+n.map(o[t]).join("\n")+"    </ul>    <p><a onclick=ui.academy.fn.addActivity()>"+r[t].button.create+"</a></p>"+o.html.error(t)+"    <button class=next onclick=\"ui.academy.fn.submit(event, '"+t+"')\">"+r[t].button.success+'</button>    <span class="back unselectable" onclick=ui.academy.fn.slide()>'+r[t].button.back+"</span></div>"},sum:function(i,e){var t="";return e&&(o.label=function(e,t){return'<div class="column nowrap'+(t?"":" name")+'">'+e+"</div>"},o.locale=function(e){return r.activity.option[e]||r[i].option[e]&&r[i].option[e].title||d.htmlSafe(e)},o.sets=function(e){var t,a=o.hasDress(),n=[];return e.set1&&(t=a?"jacket":"skirt",n.push("<span class=nowrap>"+e.set1+" "+r[i].sets[t]+"</span>")),e.set2&&(t=a?"dress":"shirt",n.push("<span class=nowrap>"+e.set2+" "+r[i].sets[t]+"</span>")),n.join("<br>")},o.line=function(e){var t=o.locale(e.name);return'<li class=row>    <div class="column nowrap name" title="'+t+'">'+t+'</div>    <div class="column nowrap">'+e.sets+'</div>    <div class="column nowrap">'+o.sets(e)+"</div></li>"},o.group=function(e){return e.map(o.line).join("\n")},t+='<div class=content>    <ul class="table sheet sheet-fixed sheet-zebra result">        <li class="row labels">'+r[i].label.map(o.label).join("\n")+"</li>"+e.map(o.group).join("\n")+"    </ul>    <a class=footer-link onclick=ui.academy.fn.slide()>"+r[i].button.retry+"</a></div>"),t},page:function(e,t){return"<li class=page id="+e+" data-handler>"+o.html[e](e,t)+"</li>"},loading:function(){return'<div class="content sheet center">'+d.loadingHTML+"</div>"},all:function(){return o.html.page("question")+o.html.page("activity")+o.html.page("sum",o.result())}},o.isValid={question:function(e){return Object.keys(r[e].option).length===Object.keys(c.value[e]).length},activity:function(e){return!!Object.keys(c.value[e]).length},all:function(){return o.isValid.question("question")&&o.isValid.activity("activity")}},o.result=function(){if(o.isValid.all()){var s=o.hasDress();return o.sumCloth=function(e){e=e||1;function t(){if(a<n){var e=n;n=a,a=e}}var a=Math.max(1,Math.floor(e/2)),n=1;if(1===a)a=e;else for(;a;){if(n=Math.max(1,Math.floor(e/a)),a-1<n){n*a+1===e&&(t(),e+1<n*(a+=1)&&(n=Math.max(1,Math.floor(e/a)))),a<e*n&&(a=Math.max(1,Math.floor((e+1)/n)));break}--a}return t(),{set1:n,set2:a}},o.result=function(){var t,a=r.sum.option,i={activity:[],adds:[]};return Object.keys(c.value.activity).forEach(function(e){var t="shabbat"===e?c.value.question.shabbat:1,a=s?2:0,n=c.value.activity[e]*t+a;i.activity.push(Object.assign({name:e,sets:n},o.sumCloth(n)))}),t=i.activity.reduce(function(e,t){return e+t.sets},0),Object.keys(a).forEach(function(e){"cover"===e&&"yes"!==c.value.question.cover||i.adds.push({name:e,sets:Math.max(1,Math.round(t*a[e].perc/100))})}),Object.values(i)},o.result()}},c.fn.slide=function(e){ui.d.getElementById("slide").style[d.getStyleProperty("transform")]="translateX("+100*(e||0)+"%)"},c.fn.slideStyle=function(e){var t,a=0;return o.isValid.question("question")&&(a+=1,o.isValid.activity("activity")&&(a+=1)),t="translateX("+100*(a||0)+"%)",e?d.getStyleProperty("transform")+":"+t+";":t},o.hasDress=function(){return"shabbat"===c.value.question.dress||"yes"===c.value.question.dress},c.fn.edit=function(e){var t,a,n=r.activity.option,i=e.target,s=i.closest("[data-handler]").querySelector("[data-error]:not([hidden])");switch(i.tagName){case"SELECT":t=o.number(i.options[i.selectedIndex].getAttribute("value")),i.hasAttribute("data-question")?(a=i.parentNode.querySelector(".label"),t?(a.hidden=!1,c.value.question[i.name]=t,i.classList.remove("unselected"),s&&(s.hidden=!0)):(a.hidden=!0,delete c.value.question[i.name],i.classList.add("unselected")),i.parentNode.classList.remove("error")):(t||(i.parentNode.innerHTML=o.activityField(t)),c.fn.sum(),s&&Object.keys(c.value.activity).length&&(s.hidden=!0));break;case"INPUT":t=o.number(i.value.trim()),Object.keys(n).forEach(function(e){n[e]===t&&(t=e)&&(i.parentNode.innerHTML=o.activityField(t)),c.fn.sum()})}},c.fn.submit=function(e,t){var a={};if(a.handler=ui.d.getElementById(t),a.error=a.handler.querySelector("[data-error]"),o.toggleError=function(e){a.error.hidden=!e},"question"===t){if(e.preventDefault(),o.isValid[t](t))return o.toggleError(!1),c.fn.slide(1),!0;o.toggleError(!0)}if("activity"===t){if(o.isValid[t](t))return JSON.stringify(c.value)===JSON.stringify(d.sessionData.task&&d.sessionData.task.clothesSum||{})?e.preventDefault():(a.handler=ui.d.getElementById("sum"),a.handler.innerHTML=o.html.loading()),o.toggleError(!1),c.fn.slide(2),!0;e.preventDefault(),o.toggleError(!0)}return!1},o.timer&&(clearTimeout(o.timer),delete o.timer),'<div class="form sum">    <h1>'+r.title+'</h1>    <form name=clothesSum onsubmit=ui.academy.formSubmit(event) autocomplete=off method=post novalidate>        <ul class="sheet swipe-pages full" id=slide style="'+c.fn.slideStyle(!0)+'">'+o.html.all()+"</ul>    </form></div>"},d.pageUI.sat=function(l){var i=d.pageUI.sat,e=d.sessionData.task&&d.sessionData.task.sat,t="",c=0,u=[],r={};return r.calc=function(t){var a=[].concat.apply([],t).map(function(e){return"object"==typeof e&&e.final?{count:t.length+1,name:e.final}:{count:1,name:e}}).reduce(function(e,t){return e[t.name]=(e[t.name]||0)+t.count,e},{}),e=Object.keys(a),n=Math.max.apply(null,e.map(function(e){return a[e]})),i=e.reduce(function(e,t){return a[t]===n&&e.push(t),e},[]);if(2<i.length)return["A"];if(2===i.length)switch(JSON.stringify(i).replace(/[[,\]]/g,"")){case"AB":case"AC":case"AD":case"AE":return["A"];case"BC":case"BD":case"BE":return["B"];case"CE":return["F"];case"DE":return["G"]}return i},t=e&&e.length?(r.calc.value=r.calc(e),'<div class="dialog final">   <div class=table>   <div class=cel>       <h1>'+l.success.title.format(r.calc.value.map(function(e){return l.final[e].title}).join(" "))+"</h1>       <div>"+r.calc.value.map(function(e){return d.generateDownloadLink(l.final[e].value,l.success.button)}).join("")+"</div>   </div>   </div></div>"):(i.fn={},i.fn.navigate=function(e){if(e){var t=ui.d.getElementById("slide"),a=e.hasAttribute("data-next"),n=ui.academy.schema.option;a?c<n.length-1&&(c+=1):(u[c]&&!Array.isArray(u[c])&&u.splice(c,1),--c),(n=n[Math.abs(c)])&&"function"!=typeof n.condition||n.condition(r.calc(u))?t&&(t.style[d.getStyleProperty("transform")]="translateX("+100*c+"%)"):(--c,i.fn.done(e))}},i.fn.check=function(e){var t,a,n=e.closest("[data-handler]"),i=n.querySelector("[data-next]"),s=d.getDataAttribute(n,"max"),o=ui.form.deserialize(n),l=Object.keys(o),r=l.length;s=s?Number(s)-1:1,t=function(e){for(a=0;a<e.length;a+=1)s<r?e[a].setAttribute("disabled",""):e[a].removeAttribute("disabled")},l.length?u[c]=0===s?{final:l[0]}:l:u[c]&&!Array.isArray(u[c])&&u.splice(c,1),r?i.removeAttribute("disabled"):i.setAttribute("disabled",""),t(ui.form.list("input:not(:checked)",n)),t(ui.form.list("input:not(:checked) ~ label",n))},i.fn.done=function(e){o.formSubmit(e.closest("[data-handler]"),u)},r.option=function(e,t,a){var n=d.generateID();return t="object"==typeof t?t.title:t,"<li"+(a?" class=box":"")+">    <input name="+e+" id="+n+" onclick=ui.academy.fn.check(this) type=checkbox>"+(a?"<figure><img class=absolute src=/assets/academy-style-"+e.toLowerCase()+'.jpg alt="'+t+'"></figure>':"")+'    <label class="column label wrap" for='+n+">"+d.generateIcon("check")+t+"</label></li>"},r.group=function(e,t,a){var n,i=Object.keys(e.option||{}),s="",o="";for(n=0;n<i.length;n+=1)s+=r.option(i[n],e.option[i[n]],e.showImage);return Object.prototype.hasOwnProperty.call(e,"option")||(e.callback=r.group,e.params=arguments,e.id=d.generateID(),o=" id="+e.id+" data-max=1"),'<li class="qa page"'+o+" data-handler>    <h4 class=wrap>"+t+". "+e.title+"</h4>    <small class=wrap><i>"+(e.limit||l.limit)+"</i></small>    <ol"+(e.showImage?" class=grid":"")+">"+s+"</ol>"+(t===a?"    <button class=next onclick=ui.academy.fn.done(this) data-next disabled>"+l.button+"</button>":"    <button class=next onclick=ui.academy.fn.navigate(this) data-next disabled>"+l.next+"</button>")+(1<t?'    <span class="back unselectable" onclick=ui.academy.fn.navigate(this) data-back>'+l.back+"</span>":"")+"</li>"},r.form=function(e){var t,a=e.option,n="";for(t=0;t<a.length;t+=1)n+=r.group(a[t],t+1,a.length);return n},'<form onsubmit=event.preventDefault() method=post novalidate>    <ul class="sheet swipe-pages" id=slide>'+r.form(l)+"</ul></form>"),'<div class="form sat">    <h1>'+l.title+"</h1>"+t+"</div>"},d.workerRegister=function(){"https:"===location.protocol&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(){navigator.serviceWorker.addEventListener("message",function(e){e.data&&d.workerUpdate(e.data,!0)})})},d.workerUpdate=function(e,t){if("object"==typeof e&&navigator.serviceWorker&&navigator.serviceWorker.controller)if("dev"===ui.environment&&console.log("ServiceWorker",e),t)switch(e.status){case"login":return location.reload();case"logout":return o.sessionLogout(!0);case"update":return d.sessionUpdate(e.data,!0)}else navigator.serviceWorker.controller.postMessage(e)},d.generateID=function(){return Math.random().toString(16).substr(2,8)},d.generateIcon=function(e){return"<svg class=icon-"+e+"><use xlink:href=#"+e+" /></svg>"},d.generateDownloadLink=function(e,t){return'<a class=button href="https://drive.google.com/uc?export=download&id='+e+'" rel=noopener target=_blank tabindex=0>'+d.generateIcon("download")+t+"</a>"},d.getDataAttribute=function(e,t){if(e&&1===e.nodeType)return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)},d.getStyleProperty=function(e){var t,a,n=["Webkit","Moz","ms"],i=ui.d.documentElement.style;if(e){if((e=e.toLowerCase().replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}))in i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),a=0;a<n.length;a+=1)if((t=n[a]+e)in i)return t}return null},d.formatDate=function(e){return("0"+e).slice(-2)},d.htmlSafe=function(e){return e?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,"&#13;").replace(/[\r\n]/g,"&#13;"):""},d.getCurrentSchema=function(){var e,t=d.getUserDefaultPackage(d.sessionData),a=d.pageSchema.package[t];return d.hashData.session?(e=a.session)&&e[d.hashData.session]||a:-1===location.href.indexOf("#")||!location.hash&&!history.replaceState?a:null},d.toggleNav=function(e){var t,a;d.hashData=ui.hash(),d.el.sidenav&&((t=d.getCurrentSchema())&&(d.toggleNav.applyClass(d.el.sidenav.querySelector(location.hash?'[data-session="'+d.hashData.session+'"]:not([data-page])':"a")),t.pages&&t.pages[d.hashData.page]&&d.toggleNav.applyClass(d.el.sidenav.querySelector('[data-session="'+d.hashData.session+'"][data-page="'+d.hashData.page+'"]'))),!0!==e||location.hash||(a=d.el.sidenav.querySelectorAll("[data-session]:not([data-page])"),d.toggleNav.applyClass(a[a.length-1]))),d.sessionPage()},d.toggleNav.applyClass=function(n){var e,i,s={};d.el.sidenav&&(s.session=d.el.sidenav.querySelector(".expand"),s.active=d.el.sidenav.querySelector(".active"),s.page=d.el.sidenav.querySelector(".selected")),d.hashData.previous={session:d.getDataAttribute(s.session,"session"),page:d.getDataAttribute(s.page||s.active,"page")},(e=function(e,t,a){!a&&d.hashData.previous[e]===d.hashData[e]||(s[e]&&(s[e].classList.remove(t),s[e].nextElementSibling&&"OL"===s[e].nextElementSibling.tagName&&ui.form.list("a",s[e].nextElementSibling).forEach(function(e){e.tabIndex=-1}),ui.d.activeElement===s[e]&&s[e].blur()),i=i||!0,n&&(n.classList.add(t),n.nextElementSibling&&"OL"===n.nextElementSibling.tagName&&ui.form.list("a",n.nextElementSibling).forEach(function(e){e.tabIndex=0})))})("session","expand"),e("page","selected",!!i),e("active","active",!!i)},o.navClick=function(e,t){if(e){var a={session:d.getDataAttribute(e,"session"),page:d.getDataAttribute(e,"page")};d.hashData.session===a.session&&d.hashData.page===a.page?e.classList.add("expand"):(a=ui.serialize(a),!t&&a?(location.hash=a,ui.d.body.scrollTop=0):(a||!location.hash)&&d.pageSchema.session[d.hashData.session]||(location.hash="",history.replaceState&&history.replaceState("",ui.d.title,location.pathname)))}},o.navKeydown=function(e){e&&e.target&&13===(e.keyCode||e.which)&&(e.preventDefault(),e.target.click())},o.formSubmit=function(e,t){var a,n,i=e instanceof Event&&e,s=e&&e.target||e;if(i&&i.preventDefault(),ui.form.valid(ui.form.list("[data-required]",s))){switch(n=d.hashData.page,a={email:d.sessionData.email,token:d.sessionData.token,data:{}},ui.form.accessibility(!1,s,!0,"sat"===n&&"label"),n){case"bodyType":a.data[n]=ui.form.deserialize(s);break;case"clothesSum":a.data[n]=d.pageUI[n].value;break;case"sat":a.data[n]=t,s.closest("[data-handler]").querySelector("[data-back]").remove()}a.data[n]&&fetch(d.endpoint+"/update",{method:"POST",redirect:"error",body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return e.error?Promise.reject(e):e}).then(function(e){d.sessionUpdate(e),o.sessionRefresh()}).catch(function(){d.sessionErrorReport("update",a)})}},d.pageSchemaSetup=function(e){var t=Object.keys(d.sessionData.package),a=e===d.pageSchema.fullPackage;d.pageSchema.package.full.session.closet.pages.bodyType=d.pageSchema.package.full.session.bodyShape.pages.bodyType,d.pageSchema.package.closet=d.pageSchema.package.full.session.closet,Object.keys(d.pageSchema.package).forEach(function(e){(!t.includes(e)||a&&d.pageSchema.fullPackage!==e)&&delete d.pageSchema.package[e]})},d.init=function(){return ui.legacy(function(){d.el.form=ui.d.getElementById("form"),d.el.form.addEventListener("submit",d.sessionLogin),d.el.bar=ui.d.getElementById("bar"),d.el.button=ui.d.getElementById("button"),d.el.content=ui.d.getElementById("content"),d.el.details=ui.d.getElementById("details"),d.el.email=ui.d.getElementById("email"),d.el.link=ui.d.getElementById("link"),d.el.link.addEventListener("click",d.sessionForgot),d.el.pass=ui.d.getElementById("pass"),d.valid=!!d.sessionData.email&&!!d.sessionData.token,d.workerRegister();function t(){var e=ui.d.getElementById("loading");e&&(d.loadingHTML=e.innerHTML,e.remove()),d.el.content.removeAttribute("hidden"),d.el.details.removeAttribute("hidden")}d.valid?d.sessionVerify(function(e){t(),d.pageSchemaSetup(e),d.sessionLogedin(),ui.identify.all()}):d.sessionData.email?(t(),d.el.email.value=d.sessionData.email,setTimeout(function(){d.el.pass.focus()},0)):t(),ui.w.addEventListener("hashchange",d.toggleNav),d.sessionError()}),o},ui.academy=d.init()}();