var contact={key:"8a321b1a-8fa6-470f-91ab-fcbe92ffbfbf",list:function(t){"use strict";if(!this.el||!t)return[];var e=this.el.querySelectorAll(t);return e.length?Array.from&&Array.from(e)||[].slice.call(e):[]},valid:function(){"use strict";if(this.required.length){var t,e,n=this.list(".error"),s=!0;for(e=0;e<n.length;e+=1)n[e].classList.remove("error");for(n=this.required,e=0;e<n.length;e+=1)(!n[e].value||"email"===n[e].type&&!/^\S+@\S+\.\S+$/.test(n[e].value)||"tel"===n[e].type&&!/^0(([23489]{1}\d{7})|[5]{1}\d{8})$/.test(n[e].value)||"message"===n[e].name&&n[e].value.length<5)&&(t=n[e].getAttribute("data-error"),s=!1,n[e].parentNode.classList.add("error"),t&&n[e].setAttribute("placeholder",t));return s}return!0},has:{classList:"classList"in document.documentElement,eventListener:!!document.addEventListener,valid:function(t){"use strict";try{return t()}catch(e){return this.error.e=e,this.error}},error:{e:null}},accessibility:function(t){"use strict";var e,n=contact.list("input, select, textarea, button");for(e=0;e<n.length;e+=1)t?n[e].removeAttribute("disabled"):n[e].setAttribute("disabled",""),"BUTTON"===n[e].tagName&&(t?(n[e].innerHTML=n[e].getAttribute("data-text"),n[e].removeAttribute("data-text")):(n[e].setAttribute("data-text",n[e].innerHTML),n[e].innerHTML="שולח..."))},success:function(){"use strict";var t,e=this.response,n=[];e=e&&contact.has.valid(function(){return JSON.parse(e)}),contact.status&&(contact.status.innerHTML=""),e&&("success"===e.result?t="<h1 class=success>תודה</h1><p>הודעה נשלחה</p>":e.error&&(e.error.email&&(contact.email&&contact.email.parentNode.classList.add("error"),n.push("אימייל לא קיים")),e.error.message&&(contact.message&&contact.message.parentNode.classList.add("error"),n.push("הודעה קצרה מדי")),n.length&&contact.status&&(contact.status.innerHTML="<ul class=error><li>"+n.join("<li>")+"</ul>",contact.accessibility(!0)))),n.length||t||(t="<h1 class=error>שגיאה בשרת...</h1><p>ניתן להירשם דרך <a href=//www.facebook.com/LeaLaukstein/>LeaLaukstein</a> או <a onclick=location.reload() tabindex=0>תנסי שוב</a>.</p>"),t&&(contact.el.innerHTML=t)},serialize:function(){"use strict";var t,e=this.list("input, select, textarea"),n=[];for(t=0;t<e.length;t+=1)("checkbox"!==e[t].type&&"radio"!==e[t].type&&e[t].value||e[t].checked)&&n.push(e[t].name+"="+encodeURIComponent(e[t].value));return n.join("&")},send:function(t){"use strict";if(t&&t.preventDefault(),contact.active&&contact.valid()){var e=new XMLHttpRequest;e.open("POST",contact.el.action,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send(contact.serialize(contact.el)+"&key="+contact.key),e.addEventListener("error",contact.success,!0),e.addEventListener("load",contact.success,!0),contact.accessibility(!1)}},dependencies:function(){"use strict";!this.has.classList&&Element.prototype&&Object.defineProperty(Element.prototype,"classList",{get:function(){function t(){return n.className.split(/\s+/)}function e(e){return function(s){var i=t(),a=i.indexOf(s);e(i,a,s),n.className=i.join(" ")}}var n=this;return{add:e(function(t,e,n){~e||t.push(n)}),remove:e(function(t,e){~e&&t.splice(e,1)}),item:function(e){return t()[e]||null},toggle:e(function(t,e,n){~e?t.splice(e,1):t.push(n)}),contains:function(e){return!!~t().indexOf(e)}}}}),this.has.eventListener||!function(t,e,n,s,i,a,r){t[s]=e[s]=n[s]=function(t,e){var n=this;r.unshift([n,t,e,function(t){t.currentTarget=n,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,e.call(n,t)}]),this.attachEvent("on"+t,r[0][3])},t[i]=e[i]=n[i]=function(t,e){var n,s;for(s=0;n=r[s];s+=1)if(n[0]===this&&n[1]===t&&n[2]===e)return this.detachEvent("on"+t,r.splice(s,1)[0][3])},t[a]=e[a]=n[a]=function(t){return this.fireEvent("on"+t.type,t)}}(window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),"undefined"==typeof console&&(window.console={log:function(){},error:function(){}})},number:function(t,e){"use strict";if(t)try{e=e||String.fromCharCode(t.keyCode||t.which),(" "===e||isNaN(e))&&t.preventDefault()}catch(n){t.preventDefault()}},paste:function(t){"use strict";if(t){var e;t.clipboardData?e=t.clipboardData.getData("text/plain"):window.clipboardData&&(e=window.clipboardData.getData("Text")),e?contact.number(t,e):t.preventDefault()}},drop:function(t){"use strict";t&&t.preventDefault()},option:function(){"use strict";var t,e=location.hash,n=contact.subject&&contact.subject.options,s=!1;if(e=e&&e.substring(1),n){if(e)for(t=0;t<n.length;t+=1)n[t].getAttribute("data-name")===e&&(contact.subject.selectedIndex>-1&&(n[contact.subject.selectedIndex].selected=!1),s=!0,n[t].selected=!0);s||0===contact.subject.selectedIndex||(n[0].selected=!0)}},autogrow:function(t){"use strict";t=t||window.event;var e=t.target||t.srcElement;e.scrollHeight<=301&&(e.style.height="auto",e.style.height=e.scrollHeight+e.offsetHeight-e.clientHeight+"px")},init:function(t){"use strict";this.active||(this.el=t&&document.getElementById(t),this.el&&(this.active=!0,this.subject=document.getElementById("subject"),this.email=document.getElementById("email"),this.tel=document.getElementById("tel"),this.message=document.getElementById("message"),this.status=document.getElementById("status"),this.el.action="//lab.alaukstein.com/contact",this.required=this.list("[data-required]"),this.dependencies(),this.option(),this.el.addEventListener("submit",this.send),window.onhashchange=this.option,this.tel&&(this.tel.addEventListener("keypress",this.number,!0),this.tel.addEventListener("paste",this.paste,!0),this.tel.addEventListener("drop",this.drop,!0)),this.message&&this.message.addEventListener(this.has.classList?"input":"keyup",this.autogrow,!0)))}};contact.init("contact");