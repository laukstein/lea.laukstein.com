ui.contact={key:"8a321b1a-8fa6-470f-91ab-fcbe92ffbfbf",endpoint:"https://lab.laukstein.com/contact",success:function(){"use strict";var e,t=ui.contact,s=[],i=(i=this.response)&&ui.has.valid(function(){return JSON.parse(i)});t.status&&(t.status.innerHTML=""),i&&("success"===i.result?e="<h1 class=success>תודה</h1><p>הודעה נשלחה</p>":i.error&&(i.error.email&&(t.email&&t.email.parentNode.classList.add("error"),s.push("אימייל לא קיים")),i.error.message&&(t.message&&t.message.parentNode.classList.add("error"),s.push("הודעה קצרה מדי")),s.length&&t.status&&(t.status.innerHTML="<ul class=error><li>"+s.join("<li>")+"</ul>",ui.form.accessibility(!0)))),s.length||e||(e="<h1 class=error>שגיאה בשרת...</h1><p>ניתן להירשם דרך <a href=//www.facebook.com/LeaLaukstein/>LeaLaukstein</a> או <a onclick=location.reload() tabindex=0>תנסי שוב</a>.</p>"),e&&(t.el.innerHTML=e)},send:function(e){"use strict";var t=ui.contact;t.session=ui.form.deserialize(t.el),e&&e.preventDefault(),t.active&&ui.form.valid(t.required)&&(ui.setUser(t.session),(e=new XMLHttpRequest).open("POST",t.el.action,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send(ui.form.serialize(t.el)+"&key="+t.key),e.addEventListener("error",t.success,!0),e.addEventListener("load",t.success,!0),ui.form.accessibility())},option:function(){"use strict";var e,t=ui.contact,s=location.hash,i=t.subject&&t.subject.options,n=!1,s=s&&s.substring(1);if(i){if(s)for(e=0;e<i.length;e+=1)i[e].getAttribute("data-name")===s&&(-1<t.subject.selectedIndex&&(i[t.subject.selectedIndex].selected=!1),n=!0,i[e].selected=!0);n||0===t.subject.selectedIndex||(i[0].selected=!0)}},autogrow:function(e){"use strict";e=(e=e||ui.w.event).target||e.srcElement;e.scrollHeight<=301&&(e.style.height="auto",e.style.height=e.scrollHeight+e.getBoundingClientRect().height-e.clientHeight+"px")},init:function(e){"use strict";this.active||(this.el=ui.form.el=e&&ui.d.getElementById(e),this.el&&(this.active=!0,this.subject=ui.d.getElementById("subject"),this.email=ui.d.getElementById("email"),this.tel=ui.d.getElementById("tel"),this.message=ui.d.getElementById("message"),this.status=ui.d.getElementById("status"),this.el.action=this.endpoint,this.required=ui.form.list("[data-required]"),this.option(),this.el.addEventListener("submit",this.send),ui.w.addEventListener("hashchange",this.option),this.tel&&(this.tel.addEventListener("keypress",ui.form.number,!0),this.tel.addEventListener("paste",ui.form.paste,!0),this.tel.addEventListener("drop",ui.form.drop,!0)),this.message&&this.message.addEventListener(ui.has.classList?"input":"keyup",this.autogrow,!0)))}},ui.contact.init("contact");