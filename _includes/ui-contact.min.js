ui.has.valid=function(e){"use strict";try{return e()}catch(t){return this.error||(this.error={e:null}),this.error.e=t,this.error}},ui.contact={key:"8a321b1a-8fa6-470f-91ab-fcbe92ffbfbf",url:"https://lab.laukstein.com/contact",success:function(){"use strict";var e,t=ui.contact,s=this.response,i=[];s=s&&ui.has.valid(function(){return JSON.parse(s)}),t.status&&(t.status.innerHTML=""),s&&("success"===s.result?e="<h1 class=success>תודה</h1><p>הודעה נשלחה</p>":s.error&&(s.error.email&&(t.email&&t.email.parentNode.classList.add("error"),i.push("אימייל לא קיים")),s.error.message&&(t.message&&t.message.parentNode.classList.add("error"),i.push("הודעה קצרה מדי")),i.length&&t.status&&(t.status.innerHTML="<ul class=error><li>"+i.join("<li>")+"</ul>",ui.form.accessibility(!0)))),i.length||e||(e="<h1 class=error>שגיאה בשרת...</h1><p>ניתן להירשם דרך <a href=//www.facebook.com/LeaLaukstein/>LeaLaukstein</a> או <a onclick=location.reload() tabindex=0>תנסי שוב</a>.</p>"),e&&(t.el.innerHTML=e)},send:function(e){"use strict";var t,s=ui.contact;e&&e.preventDefault(),s.active&&ui.form.valid(s.required)&&(t=new XMLHttpRequest,t.open("POST",s.el.action,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send(ui.form.serialize(s.el)+"&key="+s.key),t.addEventListener("error",s.success,!0),t.addEventListener("load",s.success,!0),ui.form.accessibility())},option:function(){"use strict";var e,t=ui.contact,s=location.hash,i=t.subject&&t.subject.options,r=!1;if(s=s&&s.substring(1),i){if(s)for(e=0;e<i.length;e+=1)i[e].getAttribute("data-name")===s&&(t.subject.selectedIndex>-1&&(i[t.subject.selectedIndex].selected=!1),r=!0,i[e].selected=!0);r||0===t.subject.selectedIndex||(i[0].selected=!0)}},autogrow:function(e){"use strict";e=e||ui.w.event;var t=e.target||e.srcElement;t.scrollHeight<=301&&(t.style.height="auto",t.style.height=t.scrollHeight+t.offsetHeight-t.clientHeight+"px")},init:function(e){"use strict";this.active||(this.el=ui.form.el=e&&ui.d.getElementById(e),this.el&&(this.active=!0,this.subject=ui.d.getElementById("subject"),this.email=ui.d.getElementById("email"),this.tel=ui.d.getElementById("tel"),this.message=ui.d.getElementById("message"),this.status=ui.d.getElementById("status"),this.el.action=this.url,this.required=ui.form.list("[data-required]"),ui.dependencies(),this.option(),this.el.addEventListener("submit",this.send),ui.w.onhashchange=this.option,this.tel&&(this.tel.addEventListener("keypress",ui.form.number,!0),this.tel.addEventListener("paste",ui.form.paste,!0),this.tel.addEventListener("drop",ui.form.drop,!0)),this.message&&this.message.addEventListener(ui.has.classList?"input":"keyup",this.autogrow,!0)))}},ui.contact.init("contact");